\documentclass[a4paper,draft]{article}
\usepackage[nodiagram]{dmvn}

\let\amper\&
\def\&{\mathbin{\amper}}

\def\atm{\mathbin{@}}
\def\ufa{\ol{\forall}\,}

\def\exis#1{\exi#1\,}
\def\fora#1{\fa#1\,}

\newcommand{\vv}{\vDash}

\newenvironment{nbb}{\par\vskip3pt\hrule\vskip3pt\textbf{\footnotesize Замечание наборщика.}\footnotesize }
{\vskip3pt\hrule\par\vskip3pt}

\DeclareMathOperator{\Cnst}{Cnst}
\DeclareMathOperator{\Fn}{Fn}
\DeclareMathOperator{\AF}{AF}
\DeclareMathOperator{\FV}{FV}
\DeclareMathOperator{\PC}{PC}
\DeclareMathOperator{\Fm}{Fm}
\DeclareMathOperator{\Tm}{Tm}
\DeclareMathOperator{\Th}{Th}

\input picref

\newenvironment{petit}
{\par \smallskip \hrule \smallskip \footnotesize}
{\par \smallskip \hrule \smallskip}

\def\tbk{\par\bigskip
{\huge$$\mathfrak{To\;be\;continued...}$$\par}}

\newcounter{piccounter}
\def\thepiccounter{\arabic{piccounter}}
\def\cpic#1#2#3{%
\stepcounter{piccounter}%
\piclabel{#2}{\thepiccounter}%
\par\medskip\vbox{\centerline{\epsfbox{pictures.#1}}
\centerline{\footnotesize\normalfont Рис.~\thepiccounter. #3}}\medskip\par}

\begin{document}
\dmvntitle{Курс лекций по логике}{и теории алгоритмов}
{Лектор\т Валентин Борисович Шехтман}{IV курс, 8 семестр, поток математиков}
{Москва, 2006 г.}

\tableofcontents

\pagebreak

\section*{Предисловие}

Порядок изложения материала наиболее соответствует курсу 2006~г.

Фактических изменений начиная с 27 мая в тексте не было.


\subsection*{Благодарности}

Огромное спасибо \dots

За поиск лажи выносится благодарность\dots.

\subsection*{Обозначения}


\begin{items}{-2}
  \item $A \atm B$\т формулы, связанные любой из логических связок $\vee$, $\&$, $\ra$.
  \item{} Если имеется $k$ различных величин, обозначаемых, скажем, $p_1\sco
  p_k$, мы будем иногда использовать сокращенную запись $\ol p$,
  подразумевая всё множество $\{p_1\sco p_k\}$.
\end{items}

\medskip
\dmvntrail

\begin{thebibliography}{2}
  \setlength\itemsep{-3pt}
  \bibitem{vsst} Н.\,К.\,Верещагин, А.\,Шень. \emph{Лекции по математической логике и теории алгоритмов.
                 Начала теории множеств.} М.: МЦНМО, 2000.
  \bibitem{vslc} Н.\,К.\,Верещагин, А.\,Шень. \emph{Лекции по математической логике и теории алгоритмов.
                 Языки и исчисления.} М.: МЦНМО, 2000.
  \bibitem{vscf} Н.\,К.\,Верещагин, А.\,Шень. \emph{Лекции по математической логике и теории алгоритмов.
                 Вычислимые функции.} М.: МЦНМО, 2000.
  \bibitem{vsml} В.\,А.\,Успенский, Н.\,К.\,Верещагин, В.\,Е.\,Плиско. \emph{Вводный курс математической логики.}
                 М.: ФИЗМАТЛИТ, 2004
\end{thebibliography}


\pagebreak


\section*{Введение: математика и компьютер}

\rightline{Из лжи следует истина.\hskip2cm}
\rightline{\emph{Народная мудрость}}

\medskip

В 30-е годы XX века была создана аксиоматика теории множеств Цермело\ч Френкеля (ZF).
Когда стало ясно, что все математические доказательства можно записать
с помощью формальных значков, а следствия из набора аксиом получать с помощью достаточно
простых алгоритмических операций (которые легко можно поручить компьютеру),
возник вопрос: а нельзя ли всю математику свести к компьютерным доказательствам?

Как выяснилось, на этом пути есть большая проблема. Компьютер способен получить миллионы правильных
утверждений, но они будут нам совершенно неинтересны (когда мы сами пытаемся доказать теорему,
мы уже знаем, что она нам интересна). А задача отделения полезных утверждений
от миллионов правильных утверждений уже не является алгоритмической.

Ну ладно, допустим, что для этой цели компьютер (пока) непригоден. Предположим, однако,
что мы хотим доказать какую\д то теорему, но пока не умеем этого делать. Поручим компьютеру
это задание, и он рано или поздно с этой задачей справится.
Однако и здесь есть неприятности: мы получим формальный вывод, но он будет столь длинен,
что мы не усвоим ничего полезного из этого доказательства. Хуже того, если теорема всё\д таки неверна,
то мы никогда этого не узнаем (ибо не существует алгоритма, который по формуле устанавливает,
выводима она в данной аксиоматике или нет).

Ну хорошо, в таком случае остаётся надежда только на то, что компьютер можно использовать
для проверки доказательств, написанных человеком. Это представляется наиболее реалистичным,
однако пока не удалось найти разумного способа записывать доказательства на языке, понятном одновременно
и человеку, и компьютеру.

\section{Логика высказываний}

Мы начнём с маленького фрагмента аксиоматической теории, а именно с исчисления высказываний (ИВ).

\subsection{Высказывания, формулы и правила вывода}

\subsubsection{Высказывания}

Высказывание относится к одному из неопределяемых понятий и задаётся аксиоматически:
это утверждение, которое может быть либо истинно, либо ложно.

\begin{ex}

$\bullet$ <<Число $2^{\sqrt3}$ является иррациональным.>> является истинным высказыванием.

$\bullet$ <<Число $x$ делится на $2$.>> не является высказыванием в полном смысле этого слова,
потому что содержит свободную переменную $x$. Про него мы не можем сказать, истинно оно или ложно.
Это так называемая высказывательная форма.

$\bullet$ <<Верно ли, что сегодня очень холодно?>> не является высказыванием.
\end{ex}

Мы не будем интересоваться смыслом самих высказываний, нам будет важно только их истинностное
значение. Мы будем обозначать высказывания латинскими буквами, например, $p_1, p_2\etc$.
Это так называемые пропозициональные переменные (от англ. \emph{proposition}\т высказывание).

Как и в русском языке, из нескольких высказываний можно образовывать более сложные высказывания.
Например, можно объединять их союзами <<И>>, <<ИЛИ>>, <<НЕ>> и так далее. Так и для высказываний
существуют логические связки.

Мы будем использовать символ <<1>> для обозначения того, что данное высказывание
истинно, и символ <<0>> для обозначения ложных высказываний.

Если $p$\т высказывание, то через $\neg p$ будем обозначать отрицание этого высказывания.
Зададим его таблицей:
\ctab{|c|c|}{
\hline $p$ & $\neg p$ \\
\hline\hline 0   & 1  \\
\hline 1   & 0        \\
\hline}

Для отрицания ещё используется черта сверху: $\ol p = \neg p$.

Определим теперь значения логических связок <<И>> (называется конъюнкцией и обозначается $\&$ или $\wg$),
<<ИЛИ>> (называется дизъюнкцией и обозначается $\vee$).
и <<ЕСЛИ, ТО>> (обозначается <<$\ra$>> и называется импликацией).
\ctab{|c|c|c|c|c|}{
\hline $p$ & $q$ & $p \& q$ & $p \vee q$ & $p \ra q$ \\
\hline\hline 0   & 0   & 0        & 0          & 1         \\
\hline 0   & 1   & 0        & 1          & 1         \\
\hline 1   & 0   & 0        & 1          & 0 \\
\hline 1   & 1   & 1        & 1          & 1 \\
\hline}

\subsubsection{Формулы}

Конечно, одних только переменных нам будет мало. Мы будем из высказываний с помощью связок и скобок
строить формулы. Определение даётся индуктивно:

\begin{df}\par
  $\bullet$ Все высказывательные переменные являются формулами.\par
  $\bullet$ Если $P$ и $Q$\т формулы, то $(P \& Q)$, $(P \vee Q)$, $(P \ra Q)$ являются
  формулами.\par
  $\bullet$ Если $P$\т формула, то $\neg P$\т тоже формула.
\end{df}

\begin{ex}
  Выражение $(\neg(P \& Q) \ra R)$ является формулой, а $P \& Q$\т нет, потому что всякая формула, содержащая
  хотя бы одну конъюнкцию, содержит хотя бы пару скобок, а в этом выражении скобок нет совсем.
\end{ex}

\begin{note}
  Мы часто будем опускать внешние скобки. Кроме того, чтобы не писать лишних скобок,
  часто используется приоритетность выполнения операций: самой сильной является отрицание,
  затем следует конъюнкция, затем дизъюнкция и лишь потом\т импликация.
\end{note}

\begin{note}
  На первый взгляд не совсем понятно, почему импликация имеет такую таблицу истинности. Однако рассмотрим
  такое утверждение: <<если $x$ делится на $4$, то $x$ делится на $2$>>. Оно истинно при всех значениях $x$.
  Рассмотрим два высказывания: пусть $p$ обозначает высказывание <<$x$  делится на 4>>,
  а $q$ обозначает <<$x$ делится на 2>>. Тогда наше тождественно истинное утверждение
  записывается как $p \ra q$.

  Рассмотрим различные значения $x$. Возьмём $x = 4$. Для него истинна и левая, и правая часть,
  стало быть, получается, что $1 \ra 1 = 1$.  Теперь возьмём $x$, равное $2$.
  Для него истинна только правая часть, значит, $0 \ra 1 = 1$. Теперь рассмотрим $x =1$.
  Для него ложна и правая, и левая часть, значит, $0 \ra 0 = 1$. Тем самым мы поняли, что
  хоть в каком\д то смысле импликация определена <<логично>> и согласуется с интуитивными
  представлениями. Для полноты картины рассмотрим ложное высказывание
  <<если $x$ делится на $2$, то $x$ делится на $4$>>. Подставляя $x = 2$, получаем,
  что $1 \ra 0 = 0$, то есть из истины не следует ложь.
\end{note}

\begin{note}
  Совершенно неочевидным фактом является то, что всякую формулу в ИВ можно однозначно <<разобрать>>
  на подформулы (теорема корректности, или, как её ещё называют, теорема о главном знаке).
\end{note}

Итак, у нас есть переменные, связки и формулы. Некоторые формулы замечательны тем, что они истинны при любых значениях
переменных, входящих в них. Такие формулы называются тавтологиями. Они замечательны тем, что
выражают законы логики. Введём для удобства ещё одну логическую связку, соответствующую
языковой конструкции <<РАВНОСИЛЬНО>> или <<ТОГДА И ТОЛЬКО ТОГДА>>. Она обозначается
$p \lra q$ и является сокращением для следующей формулы: $p \lra q = (p \ra q) \& (q \ra p)$.

\begin{ex}
  Это самый простой пример тавтологии: $p \ra p$.
\end{ex}

\begin{ex}
  Законы де Моргана:\par
  1) $\br{(p \& q) \vee (p \& r)} \lra \br{p \& (q \vee r)}$;\par
  2) $\br{(p \vee q) \& (p \vee r)} \lra \br{p \vee (q \& r)}$.
\end{ex}

\begin{ex}
  Закон контрапозиции: $(p \ra q) \lra (\neg q \ra \neg p)$.
\end{ex}

\begin{ex}
  Законы поглощения:\par
  1) $p \vee (p \& q) \lra p$;\par
  2) $p \& (p \vee q) \lra p$.
\end{ex}

\begin{ex}
  Законы дистрибутивности:\par
  $p \& (q \vee r) \lra (p \& q) \vee (p \& r)$;\par
  $p \vee (q \& r) \lra (p \vee q) \& (p \vee r)$.
\end{ex}

\subsubsection{Аксиомы логики высказываний}

Чтобы построить исчисление, нужно всегда задать набор аксиом.

Вот набор аксиом исчисления высказываний (ИВ):

\begin{nums}{-2}
  \item $A \ra (B \ra A)$.
  \item $\br{A \ra (B \ra C)}\ra\br{(A\ra B) \ra (A \ra C)}$.
  \item $A \& B \ra A$.
  \item $A \& B \ra B$.
  \item $A \ra (B\ra A\&B)$.
  \item $A \ra (A \vee B)$.
  \item $B \ra (A \vee B)$.
  \item $(A \ra C) \ra \br{(B \ra C) \ra (A \vee B \ra C)}$.
  \item $\neg A \ra (A \ra B)$.
  \item $(A \ra B) \ra \br{(A \ra \neg B) \ra \neg A}$.
  \item $A\vee \neg A$.
\end{nums}

На месте переменных $A, B, C$ в этих аксиомах могут стоять любые формулы логики высказываний.
Таким образом, у нас на самом деле имеется счётный набор аксиом, а здесь заданы фактически только их шаблоны.

\subsubsection{Правило вывода}

\begin{df}
  Правило вывода (modus ponens, MP для краткости)\т это правило $\frac{A,\; A \ra B}{B}$, которое говорит,
  что если истинны формулы $A$ и $A \ra B$, то $B$ тоже истинна.
\end{df}

\begin{df}
  Говорят, что формула $A$ выводима в ИВ, если существует конечная последовательность формул $A_1\sco A_n$
  таких, что при всех $i$ формула $A_i$ либо является аксиомой, либо получена из каких\д то предыдущих формул $\hc{A_1\sco A_{i-1}}$
  по правилу вывода (MP), и $A = A_n$.
\end{df}

\begin{ex}
  Выведем формулу $(p \ra p) \ra (p \ra p)$:\par
  $\bullet$ Пишем аксиому 1, получаем $A_1 := p \ra (p\ra p)$.\par
  $\bullet$ Пишем аксиому 2, получаем $A_2 := \br{p \ra (p\ra p)} \ra \br{(p\ra p) \ra (p\ra p)}$.\par
  $\bullet$ Выводим из $A_1$ и $A_2$ по правилу MP требуемую формулу.
\end{ex}

\subsection{Корректность и полнота ИВ}

ИВ замечательно именно тем,
что в нём все выводимые формулы истинны, и наоборот, любую истинную формулу можно вывести
из аксиом. Сейчас мы приступим к доказательству этого факта.
Сначала реализуем простую часть, а именно докажем теорему корректности вывода.

\subsubsection{Теорема корректности}

\begin{theorem}[Теорема о корректности вывода]
  Все выводимые в ИВ формулы являются тавтологиями.
\end{theorem}
\begin{proof}
  Как это часто бывает в этой науке, доказательство похоже на доказательство по индукции.
  Сначала проверим базу.

  \pt1. Нужно показать, что все аксиомы 1--11 являются тавтологиями. Это тривиальная, но довольно утомительная проверка,
  поэтому здесь мы не будем этого проделывать. Однако в этом рекомендуется убедиться самостоятельно\footnote{Никто не запрещает для
  этой цели использовать компьютер, ему это вполне по силам!\т \emph{Прим. наб.}}.

  \pt2. Пусть $A$\т тавтология и $(A \ra B)$\т тавтология. Допустим, что $B$ не является тавтологией.
  Тогда существует такой набор переменных, что $B$ ложна. Но $A$ истинна всегда,
  поэтому мы получили такой набор переменных, что посылка $A$ истинна, а заключение $B$ ложно.
  Но тогда $A \ra B$ ложна. Противоречие.

  Поскольку мы можем получать новые формулы вывода только подстановкой выражений в аксиомы и по правилу
  вывода, то, отправляясь от тавтологий, вновь будем получать только тавтологии.
\end{proof}

\subsubsection{Отступление об интуиционистской логике}

Прежде, чем двигаться дальше, нужно сделать важное замечание об интуиционистской логике.
Тот набор из 11 аксиом, который мы выписали, называется аксиомами классического исчисления высказываний,
для которого мы будем использовать обозначение CL (classic logic).

Если отбросить самую последнюю аксиому, то мы получим исчисление IL (intuitive logic).
В нём предполагается, что когда мы говорим <<верно $A$ или верно $B$>>, то \emph{знаем} про истинность и $A$, и $B$ по отдельности.

\begin{ex}
Пусть $A =$ <<Гипотеза Римана верна>>. Мы ничего не знаем про то, верна ли гипотеза Римана,
поэтому не знаем, истинно ли высказывание $A$. Однако в классической логике высказывание
$A \vee \neg A$ является истинным (как говорят, третьего не дано\т tertium non datur (TND)\т либо верна, либо не верна).
А вот в IL, чтобы считать $A \vee \neg A$ истинным, нужно сначала установить истинность $A$ или его отрицания.
\end{ex}

Мы ещё вернёмся к интуиционистской логике, хотя и не будем забираться в неё очень глубоко.

\subsubsection{Выводимость формулы. Подготовка к доказательству теоремы полноты}

\begin{denotes}
  Для обозначения выводимости формулы $A$ в исчислении $\Om$ мы будем использовать значок $\vdash_\Om A$.
  Значок $\vDash A$ означает, что формула $A$ является тавтологией.
\end{denotes}

\begin{note}
  Набор аксиом CL, оказывается, нельзя <<проредить>>, то есть он обладает свойством минимальности.
  Здесь мы не будем этого доказывать.
\end{note}

В этом параграфе $\Om$ будет обозначать одно из исчислений\т CL или IL,
поскольку мы не будем затрагивать последней аксиомы. Мы будем писать просто значок
выводимости, не указывая всякий раз исчисление.

\begin{df}
  Пусть $\Ga$\т некоторое множество формул. Будем говорить, что формула выводима из множества $\Ga$
  в исчислении $\Om$, если существует конечная последовательность формул $A_1\sco A_n$
  таких, что при всех $i$ формула $A_i$ либо является аксиомой, либо $A_i \in \Ga$, либо
  получена из каких\д то предыдущих формул $\hc{A_1\sco A_{i-1}}$
  по правилу вывода (MP), и $A = A_n$.
  Обозначение: $\Ga \vdash_\Om A$.
\end{df}

\begin{lemma}
$\vdash A \ra A$.
\end{lemma}
\begin{proof}
  Предъявим нужный нам вывод. Для краткости обозначим $B := A \ra A$.

  1) Аксиома 2: $[A \ra (B\ra A)] \ra [(A \ra B) \ra (A \ra A)]$.

  2) Аксиома 1: $A \ra (B\ra A)$.

  3) Из 1) и 2) выводим $(A \ra B) \ra (A\ra A)$.

  4) Аксиома 1: $A \ra B = A \ra (A \ra A)$.

  5) Из 3) и 4) выводим $B = A \ra A$.
\end{proof}

\begin{theorem}[Теорема дедукции]
  Пусть $\Ga$\т множество формул. Тогда $\Ga \cup \hc{A} \vdash B$
  тогда и только тогда, когда $\Ga \vdash A \ra B$.
\end{theorem}
\begin{proof}
  Докажем сначала обратное утверждение, потому что оно проще.
  Допустим, что $A \ra B$ выводима в $\Ga$. Напишем этот вывод $\Dc$. Ясно, что он будет выводом и в $\Ga \cup \hc{A}$.
  Допишем к $\Dc$ последовательно ещё две формулы: $A$ и $B$. Это будет вывод формулы $B$ в $\Ga\cup \hc{A}$, потому что
  $B$ получается из двух предыдущих формул по правилу MP.

  Теперь докажем прямое утверждение. Допустим, что $\Ga, A \vdash B$. Докажем, что $\Ga \vdash A \ra B$.
  Будем вести индукцию по длине вывода формулы $B$ из $\Ga \cup\hc{A}$.

  \pt0. В случае, когда $B = A$, утверждение совпадает
  с утверждением предыдущей леммы.

  \pt1. Пусть теперь $B$\т аксиома $\Om$. У нас есть аксиомы $B \ra (A \ra B)$ и аксиома $B$. Из них по правилу MP выводим $A \ra B$.
  Совершенно аналогично доказывается в том случае, когда $B \in \Ga$\т в этом случае полученный вывод, конечно, будет выводом из $\Ga$.

  \pt2. Напишем вывод $\Dc$ для $B$ в системе $\Ga \cup \hc{A}$.
  Если $B$\т не аксиома и не совпадает с $A$, то формула $B$
  получена из каких\д то двух предыдущих формул в $\Dc$ по правилу MP.
  Они, ясное дело, имеют вид $C$ и $C \ra B$, и выводы для них уже более короткие.
  Значит, к ним применимо предположение индукции. Получаем, что формулы
  $A \ra C$ и $A \ra (C \ra B)$ выводимы в $\Ga$. А коли так, напишем вывод в $\Ga$ для формулы $B$:
  \eqn{\begin{aligned}
    &\left[
    \mat{\vdots\\A \ra C}
    \right\}
    \text{\т вывод } A\ra C,\\
    &\left[
    \mat{\vdots\\A \ra (C\ra B)}
    \right\}
    \text{\т вывод } A\ra (C\ra B),\\
    &[A \ra (C\ra B)] \ra [(A \ra C) \ra (A \ra B)] \text{\т аксиома 2,}\\
    &(A \ra C) \ra (A \ra B) \text{\т MP,}\\
    &A \ra B \text{\т MP.}
  \end{aligned}}
  Вот и всё.
\end{proof}

\begin{lemma}[Метод <<От противного>>]
  Если $\Ga, A \vdash B$ и $\Ga,A \vdash \neg B$, то $\Ga \vdash \neg A$.
\end{lemma}
\begin{proof}
  Напишем требуемый вывод в $\Ga$:
  \eqn{\begin{aligned}
    &\left[
    \mat{\vdots\\A \ra B}
    \right\}
    \text{\т существует по теореме дедукции,}\\
    &\left[
    \mat{\vdots\\A \ra \neg B}
    \right\}
    \text{\т существует по теореме дедукции,}\\
    &(A \ra B) \ra [(A\ra \neg B) \ra \neg A] \text{\т аксиома 10,}\\
    &(A \ra \neg B) \ra \neg A \text{\т MP,}\\
    &\neg A \text{\т MP,}
  \end{aligned}}
  и мы победили.
\end{proof}

\begin{lemma}[Метод разбора случаев]
  Если $\Ga, A \vdash C$ и $\Ga, B \vdash C$, то $\Ga, A \vee B \vdash C$.
\end{lemma}
\begin{proof}
  Напишем требуемый вывод в $\Ga$:
  \eqn{\begin{aligned}
    &\left[
    \mat{\vdots\\A \ra C}
    \right\}
    \text{\т существует по теореме дедукции,}\\
    &\left[
    \mat{\vdots\\B \ra C}
    \right\}
    \text{\т существует по теореме дедукции,}\\
    &(A \ra C) \ra [(B\ra C) \ra (A \vee B \ra C)] \text{\т аксиома 8,}\\
    &(B\ra C) \ra (A \vee B \ra C) \text{\т MP,}\\
    &A \vee B \ra C \text{\т MP,}
  \end{aligned}}
  а теперь осталось применить теорему дедукции в обратную сторону.
\end{proof}

\begin{lemma}\label{lem:ded-imp-vee-eq}
  Имеют место утверждения
  \begin{gather}
    A, \neg B \vdash \neg (A \ra B),\\
    \neg A, \neg B \vdash \neg (A \vee B).
  \end{gather}
\end{lemma}
\begin{proof}
  Очевидно, что $A, \neg B, A\ra B \vdash B$\т достаточно одного MP.
  Ещё более очевидно, что $A, \neg B, A\bw\ra B \vdash \neg B$\т и выводить\д то нечего.
  Применим метод <<от противного>> для полученных выводов,
  получим, что $A, \neg B \vdash \neg (A \ra B)$, что и требовалось доказать.

  Докажем второе утверждение.
  Очевидно, что $A, \neg B, A\vee B \vdash \neg B$\т выводить опять\д таки нечего.
  Хотелось бы вывести отсюда же саму формулу $B$. Воспользуемся методом разбора случаев.

  Ясно, что $\neg A, \neg B, B \vdash B$\т выводить снова нечего.
  Напишем теперь вывод для $B$ из системы $\neg A, \neg B, A$.
  \eqn{\begin{aligned}
    & \neg A,\\
    & A,\\
    & \neg A \ra (A \ra B)\text{\т аксиома 9,}\\
    & A \ra B\text{\т MP,}\\
    & B\text{\т MP,}
  \end{aligned}}
  и дело в шляпе: применяем теперь метод разбора случаев к полученным выводам и получаем требуемое.
\end{proof}

\subsubsection{Путь к теореме полноты}

Мы постепенно переходим к доказательству теоремы полноты. Как и у всякой хорошей теоремы,
у неё есть несколько различных доказательств.

Первый способ состоит в том, что сначала для каждой тавтологии $A$ строится вывод $\vdash A \lra A'$,
где $A'$\т СДНФ формулы $A$. Тавтологичность формулы $A$ означает, что в СДНФ будут присутствовать все конъюнкции.
Именно их\д то мы и будем выводить.

Однако мы пойдём другим путём, а по дороге докажем кучу других полезных вещей.
Для этого нам потребуется ввести несколько новых понятий.

\subsubsection{Семантическая полнота и непротиворечивость теорий}

\begin{df}
  Пропозициональная теория\т произвольное множество пропозициональных формул.
\end{df}

\begin{df}
  Теория $\Ga$ называется противоречивой, если в ней можно вывести $A$ и $\neg A$ одновременно.
  Если так сделать нельзя, то теория называется непротиворечивой.
\end{df}

\begin{ex}
  Теория ИВ непротиворечива в силу теоремы корректности.
  Мы доказали, что из аксиом 1--11 можно выводить лишь тавтологии.
  А если $A$\т тавтология, то $\neg A$ уж никак не может быть тавтологией,
  значит, её вывести нельзя.
\end{ex}

\begin{df}
  Теория называется синтаксически полной, если для всякой формулы выводится либо $A$, либо $\neg A$.
\end{df}

\begin{df}
  Теория называется семантически полной, если в ней всякая тавтология выводима.
\end{df}

\begin{lemma}[Свойства непротиворечивых синтаксически полных теорий]
  Пусть $\Ga$\т непротиворечивая синтаксически полная теория. Тогда\par
  \pt1. $\Ga \vdash \neg A$ тогда и только тогда, когда $\Ga \nvdash A$.\par
  \pt2. $\Ga \vdash A \& B$ тогда и только тогда, когда $\Ga \vdash A$ и $\Ga \vdash B$.\par
  \pt3. $\Ga \vdash A \vee B$ тогда и только тогда, когда $\Ga \vdash A$ или $\Ga \vdash B$.\par
  \pt4. $\Ga \vdash A \ra B$ тогда и только тогда, когда $\Ga \nvdash A$ или $\Ga \vdash B$.
\end{lemma}
\begin{proof} Ну что же, давайте доказывать по порядку\ldots\par
  \pt1. Сразу следует из определения непротиворечивой синтаксически полной теории.

  \pt2. Пусть $A \& B$ выводима из $\Ga$. Присоединим к этому выводу две аксиомы $A \& B \ra A$ и $A \& B \ra B$
  и применим два раза MP.

  Обратно, пусть у нас есть выводы для $A$ и для $B$ в отдельности. Тогда
  напишем аксиому $A \ra (B \ra A \& B)$. Из неё и формулы $A$ выводим по правилу MP
  формулу $B \ra A \& B$. Применяя MP второй раз, получаем вывод формулы $A \& B$, что и требовалось.

  \pt3. Будем доказывать от противного. Допустим, что $\Ga \nvdash A$ и $\Ga \nvdash B$. Докажем,
  что $\Ga \nvdash A \vee B$. В самом деле, в силу полноты теории $\Ga$, в ней выводимы
  $\neg A$ и $\neg B$. А из этих двух формул, как мы знаем, выводима формула $\neg (A \vee B)$ (лемма \ref{lem:ded-imp-vee-eq}).
  А если она выводима, то, в силу непротиворечивости, $A \vee B$ не выводима, что и требуется.

  Обратно, пусть выводима хотя бы одна из формул $A$ или $B$. Напишем аксиому $A \ra (A \vee B)$ и $B \ra(A \vee B)$,
  после чего получим вывод для $A \vee B$ по правилу MP.

  \pt4. Пусть сначала $\Ga\nvdash A$. Докажем, что $\Ga \vdash A \ra B$.
  Из полноты следует, что $\Ga\vdash\neg A$, после чего, используя аксиому 9 ($\neg A \ra (A \ra B)$),
  получим $A \ra B$ по правилу MP.

  Если же $\Ga \vdash B$, то $A\ra B$ сразу выводится из $B$ и аксиомы~1.

  Прямое утверждение будем доказывать от противного. Допустим, что $\Ga \vdash A$ и $\Ga \nvdash B$.
  Докажем, что $\Ga \nvdash A \bw\ra B$. В силу синтаксической полноты имеем $\Ga \vdash \neg A$ и $\Ga \vdash \neg B$.
  А мы знаем, что из этих двух формул по лемме \ref{lem:ded-imp-vee-eq} выводима формула $\neg (A \ra B)$. Осталось
  воспользоваться непротиворечивостью теории.
\end{proof}

\begin{lemma}[Свойство противоречивых теорий]
  Если теория противоречива, то в ней можно вывести всё, что угодно.
\end{lemma}
\begin{proof}
  Пусть $\Ga \vdash A$ и $\Ga \vdash \neg A$. Построим вывод для произвольной формулы $B$.
  Напишем аксиому~9: $\neg A \bw\ra (A \bw\ra B)$, из неё сразу выводим $A \ra B$, а поскольку $A$ тоже
  выведено, то по правилу MP получаем вывод для $B$.
\end{proof}

\begin{lemma}[Лемма Линденбаума]
  Пусть $\Ga_0$\т непротиворечивая теория. Тогда эту теорию можно синтаксически пополнить,
  то есть существует непротиворечивая синтаксически полная теория $\Ga \supset \Ga_0$.
\end{lemma}
\begin{proof}
  Перенумеруем все формулы: $A_0, A_1,A_2\etc$. Это можно сделать, так как всякую формулу можно записать
  в \TeX е\footnote{Как вы понимаете, про \TeX\ лектор, конечно, не говорил, но подразумевал нечто в таком духе.\т \emph{Прим. наб.}},
  используя конечный алфавит (если договориться, что имя переменной\т это выделенный символ,
  снабжённый индексом, например, \verb'P_{2147483647}'), а в конечном алфавите количество формул ограниченной длины конечно,
  поэтому всего их счётное множество.

  Пусть теория $\Ga_n$ уже построена (и непротиворечива). Построим теорию $\Ga_{n+1} \supset \Ga_n$. Именно, положим
  \eqn{\Ga_{n+1} := \case{\Ga_n \cup \hc{A_n}, & \text{если эта теория непротиворечива;}\\
  \Ga_n \cup \hc{\neg A_n} & \text{иначе.}}}
  Покажем, что $\Ga_{n+1}$ непротиворечива.
  Допустим, что нам не повезло, и обе теории оказались противоречивыми. Как мы знаем из предыдущей леммы,
  в противоречивой теории можно вывести что угодно. Обозначим это <<что угодно>> через $X$.
  Тогда имеем $\Ga_n, A_n \vdash X$ и $\Ga_n, \neg A_n \vdash X$. Применяя лемму о разборе случаев,
  получаем, что $\Ga_n, A_n \vee \neg A_n \vdash X$. Но $A_n \vee \neg A_n$\т вообще аксиома, поэтому
  её можно выкинуть. Значит, что угодно можно было вывести уже в $\Ga_n$, это странно, потому что она была
  непротиворечива.

  Итак, $\Ga_{n+1}$ непротиворечива. Теперь положим
  \eqn{\Ga := \cupl{n=0}{\bes} \Ga_n.}
  Очевидно, что это синтаксически
  полная теория, потому что для каждой формулы в ней содержится либо она сама, либо её отрицание.
  Осталось доказать непротиворечивость $\Ga$. Допустим, что нам опять не повезло, и $\Ga$ противоречива.
  Значит, есть вывод $\Dc_1$ в $\Ga$ для некоторой формулы $X$ и вывод $\Dc_2$ в $\Ga$ для формулы $\neg X$.
  Заметим, что эти выводы содержат лишь конечное число формул, поэтому найдётся такое $n$, что $\Dc_1, \Dc_2 \subs \Ga_n$.
  Но это означает, что $\Ga_n$ противоречива, а мы знаем, что все теории $\Ga_k$ непротиворечивы. Полученное противоречие
  доказывает теорему.
\end{proof}

\begin{note}
  Лемма Линденбаума\т первое утверждение, в которой мы воспользовались последней аксиомой (TND),
  поэтому в IL это доказательство не пройдёт.
\end{note}



\begin{lemma}\label{lem:cl-negneg}
$\vdash_{\rm CL} \neg\neg A \ra A$.
\end{lemma}
\begin{proof}
  Очевидно, что $\neg\neg A, A \vdash A$.
  Далее, поскольку из противоречивой теории выводимо всё, что угодно, в частности, получаем, что $\neg\neg A, \neg A \vdash A$.
  В силу леммы о разборе случаев получаем $\neg \neg A, A \vee \neg A \vdash A$. Но формула $A \vee \neg A$ является аксиомой,
  и её можно убрать из вывода. Значит, $\neg\neg A \vdash A$.
\end{proof}

\subsubsection{Доказательство теоремы полноты CL}

\begin{theorem}[Теорема полноты CL]
  Всякую тавтологию $A$ можно вывести в CL.
\end{theorem}
\begin{proof}
  Будем доказывать от противного. Допустим, что $\nvdash A$. Тогда теория $\Ga_0 := \hc{\neg A}$ непротиворечива.
  В самом деле, допустим, что $\neg A \vdash B$ и $\neg A \vdash \neg B$. Применяя лемму о методе <<от противного>>,
  получаем $\vdash \neg\neg A$. По лемме \ref{lem:cl-negneg} у нас есть вывод для $\neg\neg A \ra A$.
  Применив MP, получаем вывод для $A$. Противоречие.

  Итак, $\Ga_0$ непротиворечива. Построим по лемме Линденбаума синтаксически полную непротиворечивую
  теорию $\Ga \sups \Ga_0$. Пусть $p_1, p_2\etc$\т все переменные. Зафиксируем значения
  переменных следующим образом: $\hm{p_k} = 1$ тогда и только тогда, когда $\Ga \vdash p_k$.

  Докажем, что при такой оценке $\hm{A} = 0$.
  Для этого докажем, что $\hm{B} = 1$ тогда и только тогда, когда $\Ga \vdash B$.
  Доказываем индукцией по длине $B$. Как обычно, рассматриваем несколько случаев:

  \pt0. Если $B = p_k$, то доказывать нечего.

  \pt1. Пусть $B = C \& D$. Мы знаем, что $\hm{B} = 1$ тогда и только тогда, когда $\hm{C} = 1$ и
  $\hm{D} = 1$. К формулам $C$ и $D$ уже применимо предположение индукции.
  Значит, $\hm{B} = 1$ в точности тогда, когда $\Ga \vdash C$ и $\Ga \vdash D$. Осталось применить лемму
  о свойствах синтаксически полных непротиворечивых теорий.
  Совершенно аналогично разбираются случаи дизъюнкции и импликации.

  Осталось заметить, что $\Ga \vdash \neg A$ в силу полноты теории $\Ga$. Значит, $\hm{\neg A} = 1$,
  откуда следует, что $\hm{A} = 0$, что и требовалось доказать.

  Итак, мы построили некоторую оценку, при которой наша формула принимает значение <<ложь>>.
  Стало быть, она не является тавтологией. Противоречие, следовательно, $\vdash A$.
\end{proof}

\subsection{Интуиционистская логика}

Что такое семантика? Это определение истинности, то есть выводимости в данной теории.
Ещё раз напомним, чем отличается классическая логика (CL) от интуиционистской (IL).

В интуиционистской логике истинность $A \& B$ означает, что мы \textbf{умеем доказывать} $A$ и $B$ по отдельности,
истинность $A \vee B$ означает, что мы \textbf{умеем доказывать} либо $A$, либо $B$,
истинность $\neg A$ означает умение из $A$ выводить $\bot$, а истинность $A \ra B$ трактуется как умение
из истинности $A$ выводить $B$.

Напомним, что отношение частичного порядка $\prec$ на множестве $M$\т это рефлексивное транзитивное
антисимметричное бинарное отношение.

Напомним, что рефлексивность означает $x \prec x$, транзитивность\т $(x \prec y) \& (y \prec z) \Ra (x \prec z)$,
а антисимметричность\т что $(x \prec y) \& (y \prec x) \Ra (x = y)$.

\begin{df}
  Шкала Крипке\т это пара $(W, \le)$, состоящая из непустого множества $W$ и отношения частичного порядка $\le$ на $W$.
  Множество $W$ называется множеством миров.
\end{df}

\begin{df}
  Будем говорить, что на шкале $W$ задана оценка $\ta$, если задано отображение
  $\ta\cln \Var \times W \ra \B$ оценки переменной в данном мире, удовлетворяющее следующему
  свойству: если $u \le w$ и $\ta(p,u) = 1$, то и $\ta(p,w) = 1$.
\end{df}

\begin{df}
  Шкала Крипке вместе с оценкой $\ta$ называется моделью Крипке: $(W,\le,\ta)$.
\end{df}

После того, как мы определили истинность переменных в каждом мире (то есть по сути зафиксировали
некоторую модель), не грех будет
сказать о том, как вычисляется значение формулы в мире.
Будем использовать следующие правила:

1) $u\vDash B \& C$ тогда и только тогда, когда $u \vDash B$ и $u \vDash C$.\par
2) $u\vDash B \vee C$ тогда и только тогда, когда $u \vDash B$ или $u\vDash C$.\par
3) $u\vDash \neg B$ тогда и только тогда, когда для всех $v \ge u$ имеем $v \nvDash B$.\par
4) $u\vDash B \ra C$ тогда и только тогда, когда для всех $v \ge u$ выполнено условие: если $v \vDash B$, то $v\vDash C$.


\begin{denote}
Мы будем писать $M, u\vDash A$, если формула $A$ истинна в мире $u$.
\end{denote}

\begin{lemma}[Принцип сохранности]
  Пусть $M,u \vDash A$ и $ u \le v$. Тогда $M, v \vDash A$.
\end{lemma}
\begin{proof}
  Доказательство сводится к разбору случаев. Поскольку модель везде одна и та же, не будем её указывать.

  \pt0. Если $A$\т пропозициональная переменная, то доказывать нечего.

  \pt1. Пусть $A = B \& C$. По определению истинности, в этом случае имеем $u \vDash B$ и $u \vDash C$.
  Поскольку $v \ge u$, получаем $v \vDash B$ и $v \vDash C$. Значит, $v \vDash B \& C$.

  \pt2. Пусть $A = B \vee C$. Этот случай полностью аналогичен \pt1.

  \pt3. Пусть $A = \neg B$. Значит, для всех $w \ge u$ имеем $w \nvDash B$.
  А нам нужно, чтобы для всех $x \ge v$ имеем $x \nvDash B$. Но так оно и будет,
  поскольку отношение $\le$ транзитивно, и потому $\hc{x\cln x \ge v} \subs \hc{w\cln w \ge u}$.

  \pt4. Пусть $A = B \ra C$. Мы знаем, что $v \vDash B \ra C$ тогда и только тогда, когда для всех $w \ge v$
  выполнено $w \vDash B \Ra w \vDash C$. А мы знаем, что $u \vDash B \ra C$ тогда и только тогда, когда
  для всех $x \ge u$ выполнено $x \vDash B \Ra x \vDash C$. Опять\д таки, в силу транзитивности получаем
  требуемое.
\end{proof}

\begin{note}
  Этот принцип допускает полезную переформулировку: если формула $A$ ложна в каком\д то мире,
  то она ложна и во всех <<предыдущих>> мирах.
\end{note}

\begin{df}
  Формула истинна в модели, если она истинна в любом мире.
\end{df}

\begin{df}
  Формула общезначима, если она истинна в любой модели (то есть при любых оценках).
  Обозначение: $\vDash_{\rm IL} A$.
\end{df}

\begin{theorem}[Теорема корректности для IL]
  Если $\vdash_{\rm IL} X$, то $\vDash_{\rm IL} X$.
\end{theorem}
\begin{proof}
  Будем вести индукцию по длине вывода.

  \pt0. Для начала нужно проверить, что это справедливо для аксиом.

  1) $X = A\ra (B \ra A)$. По определению имеем $u \vDash A \ra (B \ra A)$ тогда и только тогда,
  когда для всех $v \ge u$ выполнено $v \vDash A \Ra v \vDash B \ra A$.
  Докажем более общий факт: из истинности посылки следует истинность заключения.
  Именно, докажем, что для всех $v$ имеем $v \vDash A \Ra v \vDash B \ra A$.
  Как мы знаем, $v \vDash B \ra A$\т это то же самое, что для всех $w \ge v$ имеем
  $w \vDash B \Ra w \vDash A$. Но это утверждение всегда истинно,
  потому что заключение истинно во всех мирах, которые старше $v$
  (а значит, и в мире $w$!).
  \cpic{1}{ILCorrImp}{К доказательству аксиомы~1}

  2) Пусть $X = \br{A \ra (B \ra C)} \ra \br{(A \ra B) \ra (A\ra C)}$. Докажем,
  что $u \vDash X$. Это означает, что для всех $v \ge u$ выполнено
  $v \vDash A \ra (B \ra C) \Ra v \vDash (A \ra B) \ra (A \ra C)$.
  Пусть посылка истинна (ведь только в этом случае импликация может быть ложной).
  Тогда для всех $w \ge v$ имеем $w \vDash A \Ra w\vDash B \ra C$, то есть для всех $x \ge w$ при условии $w \vDash A$ имеем
  $x \vDash B \Ra x \vDash C$. А нам нужно, чтобы для всех $w \ge v$ было выполнено $w \vDash (A \ra B) \Ra w \vDash (A \ra C)$.
  Опять-таки, допустим, что $w \vDash A \ra B$. Это значит, что для всех $x \ge w$ имеем $x \vDash A \Ra x \vDash B$.
  Нам нужно доказать, что для всех $x \ge w$ имеем $x \vDash A \Ra x \vDash C$. Пусть посылка истинна.
  Значит, верно и $x \vDash B$. А отсюда необходимым образом уже следует, что $x \vDash C$, что и требуется.

  Для краткости мы не будем проверять все аксиомы, проверим только наиболее интересные.

  8) $X = (A \ra C) \ra\br{(B \ra C) \ra (A \vee B) \ra C}$. Как обычно, чтобы <<обломать>> импликацию,
  нужна истинность посылок. Пусть $u \le v \le w$. Достаточно доказать, что
  $u\vDash A \ra C \Ra u \vDash (B \ra C) \ra (A \vee B \ra C)$.
  Допустим, что $u \vDash A \ra C$. Это означает, что для всех $v \ge u$ имеем $v \vDash A \Ra v \vDash C$.
  А доказать нужно, что для всех $v \ge u$ имеем
  $v \vDash B \ra C \Ra v \vDash A \vee B \ra C$. Допустим, что $v \vDash B \ra C$. Это значит,
  что для всех $w \ge v$ имеем $w \vDash B \Ra w \vDash C$.
  А мы хотим, чтобы $v \vDash A \vee B \ra C$. Покажем, что и правда для всех $w \ge v$ имеем $w \vDash A \vee B \Ra w \vDash C$.
  Применим уже знакомую схему:
  \cpic{2}{ILCorrEight}{К доказательству аксиомы~8}
  Если в мире $w$ истинна формула $A$, то работает композиция первой и второй стрелки,
  а если истинна $B$, то работает вторая стрелка (это в точности копия рассуждения
  для первой аксиомы).

  10) $X = (A \ra B) \ra \br{(A \ra \neg B) \ra \neg A}$. Допустим, что $u \vDash A \ra B$.
  Нужно доказать, что $u \vDash (A \ra \neg B) \ra \neg B$, то есть для всех $v \ge u$
  имеем $v \vDash (A \ra \neg B) \Ra v \vDash \neg B$.
  Допустим, что $v\vDash A \ra \neg B$. Нужно получить, что для всех $w \ge v$
  имеем $w \vDash A \Ra w \vDash \neg B$. Достаточно показать, что $w\nvDash A$.
  В самом деле, допустим противное. Тогда имеем такую картину, изображённую на рис.~\picref{ILCorrTen}.
  \cpic{3}{ILCorrTen}{К доказательству аксиомы~10}
  Отсюда с помощью первых двух стрелок получаем, что $w \vDash B$, а с помощью второй стрелки\т что $v \vDash \neg B$.
  Противоречие, значит, посылка $w \vDash A$ не может быть истинной, и всё доказано.

  \pt1. Проверим, что правило вывода (MP) тоже ничего не портит. Пусть $\vdash_{\rm IL} Y, Y \ra X$, и это более короткие
  доказательства. Имеем $u \vDash Y \ra X$ и $u \vDash Y$. Тогда для всех $v \ge u$ (в частности, для $v = u$)
  имеем $v \vDash Y \Ra v \vDash X$. Но у нас $u \vDash Y$, поэтому $u \vDash X$, что и требовалось доказать.

  Отсюда следует, что все выводимые формулы будут тавтологиями. Теорема доказана.
\end{proof}


\begin{imp}[Недоказуемость TND]
  Аксиома TND не является тавтологией в IL.
\end{imp}
\begin{proof}
  Построим модель Крипке, в которой эта аксиома будет нарушена. Возьмём два мира $u$ и $v$,
  соединённые так, как показано на рис.~\picref{TNDUnproof}. Оценим переменные так: пусть $p$ истинна в $v$,
  но ложна в $u$. Тогда ясно, что $v \vDash p$, но $u \nvDash p$.
  \cpic{4}{TNDUnproof}{Модель Крипке, опровергающая TND в IL}
  Однако не менее ясно, что $u \nvDash \neg p$, иначе бы $p$ была бы ложна и в $v$, что неверно.
  Итак, в мире $u$ не является тавтологией ни переменная $p$, ни её отрицание.
  Значит, $u \nvDash p \vee \neg p$, что и требовалось показать.
\end{proof}
\begin{problem}
  Докажите, что $A \ra \neg\neg A$ выводима в IL.
\end{problem}
\begin{solution}
Нам необходимо доказать, что, как только в некотором мире $u\vv A$,
то $u\vv \neg\neg A$: из этого уже будет следовать, что $v\vv
\neg\neg A$ для всех более поздних миров $v$, а значит и $u\vv
\neg\neg A$. Так мы докажем выполнение требуемого тождества во всех
мирах, где выводится $A$, из чего, очевидно, будет следовать его
выполнимость во всех остальных мирах.

Итак, пусть $u\vv A$. Тогда, как несложно заметить, $u\vv \neg A\ra
\neg A$ (очевидно) и $u\vv \neg A\ra A$ (потому что $A$ там и так
выводится). Остается воспользоваться 10й аксиомой: $(\neg A\ra
A)\ra((\neg A \ra \neg A)\ra\neg\neg A).$
\end{solution}
\section{Логика предикатов}

\subsection{Построение языка первого порядка}

\subsubsection{Введение}

Мы уже много знаем про исчисление высказываний.
Проблема в том, что в логике нулевого порядка формулы имеют довольно
простой вид. В логике высказываний нас не интересует смысл самих
высказываний. Это довольно плохо, поэтому мы сейчас построим более
<<выразительный>> язык.

Например, высказывание <<Существует число, большее ста.>> хотелось
бы раздробить на более мелкие части, чтобы можно было анализировать
его смысл.

Так появляются атомарные формулы (строгое определение мы дадим
позже), а пока приведём некоторые примеры. $x\cdot x < 2$, $1 + 3=4$,
<<Новгород старше Москвы>>\т это примеры атомарных формул.

Как мы знаем, некоторые высказывания нельзя оценить. Это связано с тем,
что в них есть свободные переменные. Однако, если связать их кванторами,
то они превращаются в обычные высказывания.
Например, $x \cdot x < 2$ нельзя оценить, пока не указано, чему равен $x$.
А вот высказывание $\exi x \exi y (x^2 + y^2 = 84)$ уже можно оценивать,
если определить, по какому множеству бегают переменные $x$ и $y$.
Так, если $x, y \in \N$, то это высказывание ложно,
а если $x, y\in \R$, то оно истинно.

Итак, мы видим, что нам нужна <<область определения>> и атомарные формулы,
кроме того, мы захотим использовать в формулах кванторы.
Этих мотивировок нам хватит для того, чтобы начать строить языки первого
порядка.

\subsubsection{Определения}

Зафиксируем некоторое множество $\Om$ исходных символов,
называемое сигнатурой. Сигнатура\т это четвёрка $\Om = (\Cnst, \Fn, \Pr, \ga)$,
где $\Cnst$\т множество константных символов, $\Fn$\т множество функциональных
символов, $\Pr$\т множество предикатных символов, а $\ga\cln \Fn \cup \Pr \ra \N_+$\т отображение,
которое каждому функциональному символу и каждому предикатному символу ставит
в соответствие натуральное число, называемое валентностью (или арностью\т от англ. \emph{arity}).
Говоря простым языком, арность\т это количество аргументов предиката или
функционального символа. Валентность символа мы будем указывать верхним индексом.

Чтобы всё было хорошо, нужно потребовать, чтобы $\Pr \ne \es$.

Ещё нужно определить множество индивидных переменных $\Var := \hc{v_0,v_1,v_2\etc}$.


\begin{note}
  Задание сигнатуры\т это совершенно символическая операция. Никакого смысла в значках сигнатуры
  изначально не предполагается. Мы <<вдохнём в неё жизнь>> чуть позже, когда определим модель.
\end{note}

\begin{df}
  Терм сигнатуры $\Om$ определяется индуктивно:

  1) Всякая константа является термом.

  2) Всякая переменная является термом.

  3) Если $f^k \in \Fn$, а $t_1\sco t_k$\т термы, то $f^k(t_1\sco t_k)$\т терм.
\end{df}

\begin{df}
  Атомарная формула\т это выражение такого вида: $P^k(t_1\sco t_k)$, где $t_i$\т термы,
  а $P$\т $k$\д местный предикатный символ.
  Множество атомарных формул сигнатуры $\Om$ мы будем обозначать $\AF_\Om$.
\end{df}

\begin{ex}
  Пусть $\cdot^2$, $+^2$\т функциональные символы, $=^2$, $<^2$\т предикатные символы.
  Тогда привычная нам запись $1 + 3 = 2\cdot 2$ записывается так:
  $=(+(1,3), \cdot(2,2))$.
\end{ex}

Формулы строятся, начиная с атомарных формул, индуктивным образом:
\begin{df}

  1) Всякая атомарная формула является формулой.

  2) Если $\ph$ и $\psi$\т формулы, то $\neg \ph$, $(\ph \vee \psi)$, $(\ph \&\psi)$, $(\ph\ra \psi)$\т тоже формулы.

  3) Если $\ph$\т формула, а $v$\т переменная, то $\exi v\, \ph$ и $\fa v\,\ph$\т тоже формулы.
\end{df}

В логике первого порядка появляется то, чего не было в логике нулевого порядка. В ИВ вместо любой переменной
в формулу можно безболезненно подставить константу, от этого смысл не потеряется.
Однако подставлять в формулу $\fa x\, (x^2 = 2)$ вместо $x$ константу по меньшей мере нелепо:
$\fa 5\, (5^2 = 2)$. Дело в том, что кванторы связывают некоторые переменные,
значит, нужно научиться определять все связанные вхождения переменной.

Определим индуктивно множество $FV(\ph)$ свободных переменных формулы $\ph$.

1) Если $\ph$\т атомная формула, то в ней все переменные свободны.

2) При навешивании $\neg$ ничего не меняется.

3) При навешивании $\&$, $\vee$, $\ra$ множества свободных переменных объединяются.
Например, $FV(\al \& \be) = FV(\al) \cup FV(\be)$.

4) При навешивании квантора все свободные вхождения переменной, по которой берётся
квантор, объявляются связанными.

\begin{df}
  Если $FV(\al) = \es$, то формула называется замкнутой.
\end{df}

\subsubsection{Интерпретация сигнатуры. Модель. Оценки}

Пусть $M$\т непустое множество. Интерпретация сигнатуры $\Om$\т это пара $(M, I)$,
где $I$\т интерпретирующая функция. Её область определения\т множество $\Cnst \cup \Fn \cup \Pr$.
При этом всякому константному символу эта функция сопоставляет некоторый элемент множества $M$,
всякому $k$\д местному функциональному символу\т функцию $M^k \ra M$, а всякому $k$\д местному
предикатному  символу\т отображение $M^k \ra \B$, то есть $k$\д местный предикат на множестве $M$.

Итак, всё достаточно естественно. Интерпретация просто назначает значкам их <<реальный смысл>>.

Для дальнейшего нам потребуется расширить сигнатуру, чтобы иметь возможность определить оценку формулы.

\begin{df}
  Пусть фиксирована модель $M$. Расширенной сигнатурой называется множество $\wt\Om := \Om \cup M$.
\end{df}

\begin{note}
  Естественно, чтобы не вышло неприятности, нужно, чтобы $M$ не пересекалось с $\Om$. Но это несложно обеспечить.
\end{note}


\begin{df}
  Значение оценки $t^M$ замкнутого терма $t$ определяется опять\д таки индуктивно:

  1) оценка константы $a \in \Cnst$\т это просто $I(c)$.

  2) оценка элемента носителя\т это он сам.

  3) оценка функционального символа $f$: $\hm{f(t_1\sco t_k)} := I(f)(t_1^M\sco t_k^M)$.
\end{df}

Для краткости будем писать $f^M$ вместо $I(f)$ для функциональных символов и $P^M$ вместо $I(P)$ для предикатных символов.

\begin{df}
  Совершенно аналогично определяется оценка для формулы.

  1) $\hm{P(t_1\sco t_k)} := P^M(t_1^M\sco t_k^M)$.

  2) Оценки для формул $\ph \atm \psi$, $\neg \ph$  определяются естественным образом.

  3) $\hm{\exi v\,\ph} = 1$ тогда и только тогда, когда найдётся $a \in M$ такое, что $\hm{[a/v]\ph} = 1$.

  4) $\hm{\fa v\,\ph} = 1$ тогда и только тогда, когда для всех $a \in M$ имеем $\hm{[a/v]\ph} = 1$.
\end{df}

\begin{df}
  Формула называется истинной в модели, если её оценка в этой модели истинна.
  В этом случае пишут $M \vDash \ph$. Формула называется общезначимой, если она истинна в любой
  модели. Формула называется выполнимой, если существует модель $M$, для которой $M \vDash \ph$.
\end{df}

\begin{df}
  Пусть $FV(\ph) = \hc{x_1\sco x_n}$. Тогда универсальным замыканием $\ufa\ph$ формулы $\ph$ называется формула
  $\fa x_1\fa x_2\ldots\fa x_n\,\ph$.
\end{df}

\begin{df}
  Пусть $\ph$\т любая формула (не обязательно замкнутая). Будем говорить, что $M \vDash\ph$, если $M \vDash \ufa\ph$.
  Аналогично определяются общезначимые незамкнутые формулы.
\end{df}


\begin{lemma}
  Если $\exis{x}(\ph \& \psi)$, то $\exis{x}\ph \& \exis{x}\psi$.
\end{lemma}
\begin{proof}
  Рассмотрим интерпретацию $M$. По определению, найдётся $a \in M$ такое, что
  $\hm{[a/x]\ph \& [a/x] \psi} = 1$. Тогда $\hm{[a/x]\ph} = 1$ и $\hm{[a/x]\psi} = 1$.
  Значит $\hm{\exis{x}\ph} = 1$ и $\hm{\exis{x}\psi} = 1$, и всё доказано.
\end{proof}

\begin{ex}
  Обратно неверно, как показывает следующий  пример. Рассмотрим $M := \N$, а предикат $P$ определим так:
  $P(x) = 1$ тогда и только тогда, когда $x$ чётно. Рассмотрим $\ph := P(x)$ и $\psi := \neg P(x)$.
  Тогда, очевидно, $M \vDash \exis{x} \ph$ и $M \vDash \exis{x} \psi$, но формула $\ph \& \psi$ является тождественно ложной.
\end{ex}

\begin{df}
  Формулы $\ph$ и $\psi$ называются эквивалентными, если $\vDash \ph \lra \psi$.
  При этом пишут $\ph \sim\psi$.
\end{df}

\begin{ex}
  Если $x \notin FV(\ph)$, то формулы $\ph$, $\exis{x}\ph$ и $\fora{x}\ph$ обозначают одно и то же (эквивалентны),
  потому что при подстановке ничего не поменяется.
\end{ex}

\begin{df}
  Теория первого порядка\т произвольное подмножество замкнутых формул сигнатуры $\Om$.
  Элементы теории называются аксиомами.
\end{df}

\begin{df}
  Будем говорить, что $M$\т модель теории $T$, если $M \vDash T$, то есть для всех $\ph \in T$ имеем $M \vDash\ph$.
  Будем говорить, что теория $T$ выполнима, если существует модель $M$, для которой $M \vDash T$.
\end{df}

\begin{ex}
  Построим теорию графов (наши графы не будут содержать петель). Сигнатура будет состоять только из одного двуместного предиката $P^2$.
  Зададим аксиомы:

  1) $\fora{x} \neg P(x,x)$\т иррефлексивность.

  2) $\fora{x}\fora{y} P(x,y) \ra P(y,x)$\т симметричность.

  Предикат $P$ задаёт отношение <<$x$ и $y$ связаны ребром>>.
\end{ex}

Казалось бы, язык первого порядка уже довольно богат. Однако можно показать, на нём нельзя записать, например,
такое утверждение: <<В графе существует цикл>>. <<Бедность>> нашего языка в том, что кванторы
могут применяться только к переменным, принимающим значения в носителе. Мы не можем, например, пробежаться
\emph{по всем предикатам} или по всем функциям; мы умеем бегать только по всему множеству $M$.

\begin{df}
  Будем называть интерпретацию нормальной, если в ней знак равенства ($=$) означает совпадение объектов.
\end{df}

\begin{ex}
  Построим теорию полугрупп. Имеем $\Fn := \hc{\circ^2}$, $\Pr := \hc{=^2}$.
  Единственной аксиомой будет требование ассоциативности: $(x\circ y) \circ z = x \circ (y \circ z)$.
\end{ex}

\begin{ex}
  Приведём пример выполнимой теории, не имеющей конечных интерпретаций. Рассмотрим такую систему аксиом:

  1) $\fora{x} \neg P(x,x)$\т иррефлексивность.

  2) $\fora{x}\fora{y}\fora{z} \br{P(x,y)\& P(y,z) \ra P(x,z)}$\т транзитивность.

  3) $\fora{x}\exis{y} P(x,y)$\т аксиома следования.

  Модель такой теории очевидна: множество натуральных чисел, предикат $P$ символизирует отношение <<меньше>>.
  Очевидно, что у такой теории не может быть конечной модели: если $M$ конечно, то рассмотрим произвольный элемент $x_0$
  носителя и построим следующий элемент $x_1$, такой что $P(x_0,x_1)$. Далее повторяем то же для $x_1$,
  получаем $x_2$, и так далее. Следовательно, получим последовательность $\hc{x_i}$. В силу конечности множества,
  найдутся два одинаковых элемента: $x_i = x_k$. Тогда в силу транзитивности имеем $P(x_i, x_k)$,
  что невозможно в силу иррефлексивности.
\end{ex}


Подстановка терма вместо переменной в формулу\т это, грубо говоря, замена всех свободных
вхождений переменной данным термом. Однако, как будет видно из следующего примера,
не все подстановки являются хорошими.

\begin{ex}
  Рассмотрим формулу $\ph := P(x) \& \exis{x} P(x)$. Тут всё хорошо: подстановка $t$ вместо $x$ ничего не портит,
  получаем $[t/x] \ph = P(t) \& \exis{x} P(x)$.   Теперь возьмём формулу $\psi := \exis{y}\br{P(y) \& \neg P(x)}$.
  Попробуем подставить $y$ вместо $x$: $[y/x]\psi = \exi y\br{P(y) \& \neg P(y)}$.
  Получилось совсем не то, что мы хотели. А почему? А потому что у нас подставленная переменная $y$ попала в область действия
  квантора и стала связанной.
\end{ex}

\begin{df}
  Терм $t$ называется свободным для $x$ в формуле $\ph$, если никакое свободное вхождение $x$ в $\ph$
  не находится в области действия квантора по свободным переменным терма $t$.
\end{df}

Итак, теперь надлежит строго определить, что такое подстановка.

\begin{df}
  Подстановка $s := [t/x]r$ терма $t$ вместо $x$ в терм $r$ определяется, как водится, индуктивно.

  1) Если $r = v \in \Var$, то $[t/x]r = \case{v, & v \ne x,\\ t, & v = x.}$

  2) Если $r = c \in \Cnst$, то $[t/x]c := c$.

  3) Если $r = f(t_1\sco t_k)$, то $[t/x]f(t_1\sco t_k) := f\br{[t/x] t_1\sco [t/x] t_k}$.
\end{df}

\begin{df}
  Подстановка в формулы с кванторами делается так:
  $[t/x] \exis{v}\psi := \case{\exis{v} [t/x]\psi, & v \neq x,\\ \exis{x}\psi,& v =x .}$
\end{df}


Мы будем использовать одно соглашение, касающееся обозначения подстановки переменных в формулы.
Зависимость формулы от параметра $x$ мы не будем обозначать никак, то есть просто будем писать $\ph$.
А вот подстановку $[t/x]\ph$ будем обозначать через $\ph(t)$.

\begin{denote}
  Исчисление предикатов сигнатуры $\Om$ мы будем обозначать $\PC_\Om$. Мы не будем этого явно указывать,
  но всегда подразумевать, что имеется в виду классическое исчисление.
\end{denote}

Определим аксиоматику исчисления предикатов.

1--11) Аксиомы 1--11 переносятся без изменений из классического ИВ.

Кроме них добавляется ещё 4~шаблона:

12) $\fora{x}\ph(x) \ra \ph(t)$.

13) $\ph(t) \ra \exis{x}\ph(x)$.

14) $\fora{x}\br{\ph(x) \ra \psi} \ra\br{\exis{x} \ph(x) \ra \psi}$.

15) $\fora{x}\br{\psi \ra \ph(x)} \ra \br{\psi \ra \fora{x}\ph(x)}$.

Дополнительно существует уже знакомое нам правило вывода (не будем здесь напоминать его определение)
и правило обобщения (Gen), устроенное так: $\frac{\ph}{\fora{x} \ph}$.
\subsubsection{Правила логики предикатов}
\begin{theorem}[Теорема дедукции]
  \equ{\Ga\vdash (\ph \ra \psi)\Lra\Ga, \ph \vdash \psi,}
    причём предполагается, что правило обобщения не применяется к параметрам формулы $\ph$.
\end{theorem}
\begin{nbb}
Без этой говорки теорема не выполняется. Пример:
\equ{P(x)\vdash\fora xP(x),\quad \not\vdash P(x)\ra\fora xP(x).}
\end{nbb}
\begin{proof}
Доказывать будем, как всегда, индукцией по длине вывода формулы $\psi$.
Нас интересует лишь случай, когда $\psi$ получается по правилу обобщения, так как остальные уже были рассмотрены
при доказательстве теоремы дедукции логики высказываний.
Итак, пусть $\psi=\fora x\eta(x).$ По предположению индукции
\equ{\Ga,\ph\vdash\eta(x)\Ra\Ga\vdash\ph\ra\eta(x).}
Применяя правило обобщения, получим
\equ{\Ga\vdash\fora x\hr{\ph\ra\eta(x)}.}
Осталось лишь записать 15ю аксиому:
\equ{\fora x\hr{\ph\ra\eta(x)}\ra\hr{\ph\ra\fora x\eta(x)}}
и воспользоваться правилом МР.
\end{proof}

\begin{stm}
  Если $\ph \vdash \psi$, то $\frac{\ph}{\psi}$\т допустимое правило.
\end{stm}
\begin{proof}
  Смысл этого утверждения состоит в том, что если мы сначала получили доказательство
  какой\т то формулы, то потом можем просто пользоваться готовым доказательством, заменяя
  посылку на утверждение. На формальном уровне это означает, что мы всякий раз подставляем
  доказательство формулы $\psi$ в вывод.
\end{proof}

\begin{stm}[Правила Бернайса]

  1) $\al \ra \be(x)  \vdash \br{\al \ra \fora{x}\be(x)}$.

  2) $\be(x) \ra \al \vdash \exis{x}\be(x) \ra \al$, если $x \notin FV(\al)$.
\end{stm}
\begin{proof}
Для доказательства 1го пункта следует применить правило обобщения, потом 15ю аксиому и правило вывода
(всё аналогично доказательству теоремы дедукции). То же самое касается и 2го пункта, только там нужна 14я аксиома.
\end{proof}

\begin{stm}
$\neg \exis{x}\ph \ra \fora{x} \neg \ph$.
\end{stm}
\begin{proof}
Напишем вывод из наших аксиом и правил:

1) $\ph \ra \exis{x} \ph$\т это аксиома 13 при $t = x$.

2) $\neg \exis{x} \ph \ra \neg \ph$\т правило контрапозиции.

3) $\neg \exis{x} \ph \ra \fora{x} \neg \ph$\т правило Бернайса,
вот и всё.

\end{stm}

$(\ph \ra \psi) \ra (\neg \psi \ra \neg \ph)$\т тавтология языка нулевого порядка.
Она истинна в CL, поэтому выводима в CL (по теореме полноты для CL),
следовательно, выводима и тут.
\begin{nbb}
На всякий случай приведу вывод:
\begin{enumerate}
  \item 10я аксиома для $\ph$ и $\psi$
  \item $\ph\ra\psi$
  \item $(\ph\ra\neg\psi)\ra\neg\ph$\т получается по МР из 2х предыдущих
  \item $\neg\psi$
  \item $\neg\psi\ra(\ph\ra\neg\psi)$\т первая аксиома
  \item $\ph\ra\neg\psi$\т получается по МР из 2х предыдущих
  \item $\neg\ph$\т получается по МР из 3 и 6
\end{enumerate}
Таким образом, мы доказали, что $\ph\ra\psi,\neg\psi\vdash\neg\ph$. Осталось воспользоваться правилом дедукции.
\end{nbb}

\begin{stm}
  Монотонность импликации:

  1) $\ph \ra \psi \vdash \fora{x} \ph \ra \fora{x} \psi$.

  2) $\ph \ra \psi \vdash \exis{x} \ph \ra \exis{x} \psi$.
\end{stm}
\begin{proof}
Доказательство для 1го пункта.
\begin{enumerate}
  \item $\ph\ra\psi$
  \item $\fora x\ph\ra\ph$\т это 12я аксиома
  \item $\fora x\ph\ra\psi$
  \item $\fora{x} \ph \ra \fora{x} \psi$\т правило Бернайса
\end{enumerate}
Доказательство для 2го пункта.
\begin{enumerate}
  \item $\ph\ra\psi$
  \item $\psi\ra\exis x\psi$\т это 13я аксиома
  \item $\ph\ra\exis x\psi$
  \item $\exis{x} \ph \ra \exis{x} \psi$\т правило Бернайса
\end{enumerate}
\end{proof}
\begin{stm}

1) $\exis x\ph(x)\ra\exis y\ph(y),\quad x\not\in\FV(\exis y\ph(y))$

2) $\fora x\ph(x)\ra\fora y\ph(y),\quad y\not\in\FV(\fora x\ph(x))$
\end{stm}
\begin{proof}
Эти правила становятся совсем уж очевидными, если переписать их в несколько ином виде:
\equ{\exis y[y/z]\ph(z)\ra\exis x[x/z]\ph(z),\quad x,y\not\in\FV(\ph)}
\equ{\fora y[y/z]\ph(z)\ra\fora x[x/z]\ph(z),\quad x,y\not\in\FV(\ph)}
\end{proof}
\begin{lemma}

1) $\neg\exis x\ph\lra\fora x\neg\ph$

2) $\neg\fora x\ph\lra\exis x\neg\ph$
\end{lemma}
\begin{proof}
Первый пункт.
\begin{enumerate}
  \item $\fora x\ph\ra\ph$\т аксиома 12
  \item $\neg\ph\ra\neg\fora x\ph$\т правило контрапозиции
  \item $\neg\exis x\ph\ra\fora x\neg\ph$\т правило Бернайса
\end{enumerate}
Теперь докажем, что
\equ{\fora x\neg\ph\ra\neg\exis x\ph,}
что, очевидно, эквивалентно тому, что $\neg\fora x\ph\leftarrow\exis x\neg\ph$ (достатточно заменить $\ph$ на $\neg\ph$ и применить правило контрапозиции).
\begin{enumerate}
  \item $\fora x\neg\ph\ra\neg\ph$\т аксиома 12
  \item $\ph\ra\neg\fora x\neg\ph$\т правило контрапозиции
  \item $\exis x\ph\ra\neg\fora x\neg\ph$\т правило Бернайса
  \item $\fora x\neg\ph\ra\neg\exis x\ph$\т правило контрапозиции
\end{enumerate}
Осталось доказать, что $\neg\fora x\ph\ra\exis x\neg\ph$.
\begin{enumerate}
  \item $\neg\exis x\neg\ph\ra\fora x\neg\neg\ph$\т по уже доказанному
  \item $\neg\neg\ph\ra\ph$
  \item $\fora x\neg\neg\ph\ra\fora x\ph$\т монотонность
  \item $\neg\exis x\neg\ph\ra\fora x\ph$\т два раза МР
  \item $\neg\fora x\ph\ra\exis x\neg\ph$\т правило контрапозиции
\end{enumerate}
Теперь лемма доказана полностью.
\end{proof}

\subsubsection{Теорема корректности исчисления предикатов}

В этом разделе нашей основной целью будет доказательство теоремы корректности
для исчисления предикатов, а именно,
\equ{\vdash_{\PC_{\Om}}\ph\Ra\vDash\ph.}
Доказательство мы разобъём на много\д много промежуточных лемм. Итак, вперёд.
\begin{lemma}
Пусть дана формула $\ph\in\Fm_\Om$ и $\FV(\ph)\subseteq\{x_1\sco x_n\}.$
Тогда в любой интерпретации $M$ сигнатуры $\Om$
\equ{M\vDash\ufa \ph\Lra\text{для всех } \,a_1\sco a_n\in M\quad M\vDash[a_1\sco a_n/x_1\sco x_n]\ph.}
\end{lemma}
\begin{proof}
Индукцией по $n$:
\equ{|\fora x_1\ldots\fora x_n\ph|_M=1\Lra\text{для всех }\,a_1\in M\quad |[a_1/x_1]\fora x_2\ldots\fora x_n\ph|_M=1.}
\end{proof}

\begin{lemma}
Пусть $\al$\т одна из первых 11ти аксиом. Тогда $\vDash\al$.
\end{lemma}
\begin{proof}
Почти очевидно. Берём произвольный набор переменных, подставляем в формулы, фигурирующие в аксиоме.
Считаем их (формул) значения в интерпретации. Подставляем, получаем аксиому логики высказываний\т
а про них нам известно, что они все\т тавтологии.
\end{proof}
\begin{lemma}
Пусть $\al$\т 14я аксиома. Тогда $\vDash\al$.
\end{lemma}
\begin{proof}
Итак, есть утверждение вида
\equ{\fora{x}\br{\ph(x) \ra \psi} \ra\br{\exis{x} \ph(x) \ra \psi},\quad x\not\in\FV(\psi).}
Пусть $\FV(\al)=\{y_1\sco y_n\}$. Ясно, что $x\not\in\FV(\al).$
Пусть $\psi_1$ и $\ph_1(x)$\т формулы, полученные в результате подстановки в $\psi$ и $\ph$ некоторых значений переменных $y_i$.
Тогда
\equ{\al_1=\fora{x}\br{\ph_1(x) \ra \psi_1} \ra\br{\exis{x} \ph_1(x) \ra \psi_1}.}
Полагаем, что $|\fora{x}\br{\ph_1(x) \ra \psi_1}|=1$ и $|\exis{x} \ph_1(x)|=1$,
нужно доказать, что $|\psi_1|=1$. То есть, мы знаем, что для некоторого $a\in M$
$|\ph(a_1)|=1$ и $|\ph_1(a) \ra \psi_1|=1$. По МР (в рамках логики высказываний) получаем, что $|\psi_1|=1.$
\end{proof}
Следующая лемма доказывается полностью аналогично.
\begin{lemma}
Пусть $\al$\т 15я аксиома. Тогда $\vDash\al$.
\end{lemma}
А это и вовсе очевидно:
\begin{lemma}
\equ{\vDash\al,\al\ra\be\Ra\vDash\be.}
\end{lemma}
\begin{lemma}
\equ{\vDash\ph\Ra\vDash\fora x\ph.}
\end{lemma}
\begin{proof}
По определению, $M\vDash\ph\Lra M\vDash\ufa\ph.$
\end{proof}
\begin{lemma}[о двойной подстановке в терм]
Даны термы $r\in\Tm_{\Om\cup M},\,\FV(r)\subseteq\{x\}$ и
$t\in\Tm_{\Om},\,\FV(t)\subseteq\{z_1\sco z_n\}$ и элементы носителя $c_1\sco c_n\in M$.
Обозначим $a=|t(\ol c)|_M.$ Тогда
\equ{|[\ol c/\ol z][t/x]r|_M=|[a/x]r|_M.}
\end{lemma}
\begin{proof}
Очевидно (индукция по длине терма, то есть по числу функциональных символов в нём).
\end{proof}
\begin{lemma}[о двойной подстановке в формулу]
Дана формула термы $\psi\in\Fm_{\Om\cup M},\,\FV(r)\subseteq\{x\}$ и терм
$t\in\Tm_{\Om},\,\FV(t)\subseteq\{z_1\sco z_n\}$, а также элементы носителя $c_1\sco c_n\in M$,
причём подстановка $[t/x]$ свободна в $\psi$.
Обозначим $a=|t(\ol c)|_M.$ Тогда
\equ{|[\ol c/\ol z][t/x]\psi|_M=|[a/x]\psi|_M.}
\end{lemma}
\begin{proof}
Опят\д таки индукция по длине формулы. Здесь тоже всё достаточно очевидно, отдельного рассмотрения заслуживает лишь
случай с квантором: $\psi(x)=\exis u\psi_1(u,x),\,u\neq x$. Тогда $\FV(\psi_1)=\{u,x\}$, причём $u\not\in\ol z$ (по условию
подстановка свободна). Нам нужно доказать равенство
\equ{|[\ol c/\ol z][t/x]\exis u\psi_1|=|[a/x]\exis u\psi_1|.}
Пусть слева единица, докажем, что и справа получим один.

Итак, для некоторого $m\in M$ имеем:
\equ{|[\ol c/\ol z][t/x][m/u]\psi_1|=1.}
Обозначим $\psi_2=[m/u]\psi_1$. $\psi_2$ короче, чем $\psi$, следовательно, к этой формуле можно применить предположение индукции:
\equ{1=|[\ol c/\ol z][t/x][m/u]\psi_1|=|[\ol c/\ol z][t/x]\psi_2|=|[a/x]\psi_2|=|[a/x][m/u]\psi_1|,}
а значит $|[a/x]\exis u\psi_1|=1,$ что и требовалось. Все рассуждения обратимы, поэтому окончательно получаем
\equ{|[\ol c/\ol z][t/x]\exis u\psi_1|=1\Lra|[a/x]\exis u\psi_1|=1.}

Случай с квантором всеобщности разбирается полностью аналогично. Случай замкнутой формулы очевиден. Лемму можно считать доказанной.
\end{proof}

\begin{lemma}
Пусть $\al$\т 13я аксиома. Тогда $\vDash\al$.
\end{lemma}
\begin{proof}
Нужно доказать, что
\equ{M\vDash\al=[t(\ol z)/x]\ph(x,\ol y)\ra\exis x\ph(x,\ol y).}
По определению, для этого нужно доказать, что $M\vDash\ufa\al$, то есть
$M\vDash[\ol b,\ol c/\ol y,\ol z]\al$ для произвольных элементов носителя $\ol b,\ol c$.
При подстановке ещё надо учитывать, что наборы переменных $\ol y$
и $\ol z$ могут пересекаться, но мы не станем вдаваться в такие подробности.
Итак, имеем
\equ{|[\ol b,\ol c/\ol y,\ol z]\al|=|[\ol b,\ol c/\ol y,\ol z][t,x]\ph(x,\ol y)\ra[\ol b/\ol z]\exis x\ph(x,\ol y)|=|\al_1\ra\al_2|,}
то есть нужно доказать, что $|\al_1|=1\Ra|\al_2|=1$.
Доказываем:
\equ{|\al_1|=|[\ol c/\ol z][t/x]\ph(x,\ol b)|=|[a/x]\ph(x,\ol b)|\Ra|\exis x\ph(x,\ol b)|=1,}
где $a=|t(\ol c)|$. Вот и всё.
\end{proof}
\begin{lemma}
Пусть $\al$\т 12я аксиома. Тогда $\vDash\al$.
\end{lemma}
\begin{proof}
Полностью аналогично предыдущей лемме.
\end{proof}
Тем самым, доказательство теоремы корректности для исчисления предикатов завершено.

\subsubsection{Теорема корректности и теорема непротиворечивости\\ для теорий первого порядка}

\begin{df}
Будем говорить, что формула $\ph$ логически следует из теории $T$ ($T\vDash\ph$), если $\ph$ истинна в любой модели этой теории.
Для незамкнутых формул, как обычно, речь идёт об их универсальном замыкании.
\end{df}
\begin{theorem}[корректности для теорий первого порядка]
\equ{T\vdash\ph\Ra T\vv\ph.}
\end{theorem}
\begin{proof}
Как обычно, индукция по длине вывода. База\т очевидно. Шаг\т теорема дедукции.
\end{proof}
\begin{df}
Теория $T$ противоречива, если найдётся такая формула $\ph$, что $T\vdash\ph$ и $T\vdash\neg\ph$.
\end{df}
\begin{theorem}[о непротиворечивости для теорий первого порядка]
Выполнимая теория непротиворечива.
\end{theorem}
\begin{proof}
Предположим обратное. Тогда в некоторой модели $M\vv\ph$ и $M\vv\neg\ph$, что невозможно
(если $\ph$ незамкнута, берём $\ufa\ph$ и приходим к такому же противоречию).
\end{proof}

\subsubsection{Теории с равенством}

В исчислении предикатов с равенством ($\PC_\Om^=$) всякая сигнатура снабжается дополнительным предикатным символом <<$=$>>,
а список аксиом пополняется следующими пятью:

16) $\fora x\,x=x$

17) $\fora x\fora y\,(x=y\ra y=x)$

18) $\fora x\fora y\fora z\,(x=y\&y=z\ra x=z)$

19) $\ufa\hr{x_1=y_1\&\ldots x_n=y_n\ra f^n(x_1\sco x_n)=f^n(y_1\sco y_n)},\quad f^n\in\Fn$

20) $\ufa\hr{x_1=y_1\&\ldots x_n=y_n\ra P^n(x_1\sco x_n)=P^n(y_1\sco y_n)},\quad P^n\in\Pr$

Понятия выводимости и логического следования вводятся аналогично обычному исчислению предикатов.

\begin{df}
Интерпретация $M$ теории с равенством нормальна, если
\equ{M\vv a=b\Lra a=b,}
причём равенство справа понимается как совпадение соответствующих элементов носителя.
\end{df}

\begin{lemma}

1) $\vdash_{\PC_\Om^=}t_1=r_1\&\ldots\& t_n=r_n\ra f(t_1\sco t_n)=f(r_1\sco r_n)$

2) $\vdash_{\PC_\Om^=}t_1=r_1\&\ldots\& t_n=r_n\ra P(t_1\sco t_n)=P(r_1\sco r_n)$
\end{lemma}


\subsection{Теории Хенкина}

\subsubsection{Экзистенциальная полнота}

\begin{df}
Теория $T$ экзистенциально полна ($\exis$\ч полна) в сигнатуре $\Om$, если для любой
формулы $\ph(x)~\in~\Fm_{\Om}$ выполнено следующее следствие: если $T\vdash\exis x\ph(x)$, то
существует такой замкнутый терм $t\in\Tm_{\Om}$, что $T\vdash\ph(t)$.
\end{df}
\begin{nbb}
Говоря неформально, это означает, что квантор существования всегда реализуется в теории $T$.
\end{nbb}
\begin{ex}
Пусть задана сигнатура $\Om_1=(\{0,1\},\{+\},\emptyset,\ga_1)$ со стандартной интерпретацией $\N_1$ (натуральные числа со сложением).
В ней рассмотрим теорию $\Th(\N_1)$, состоящую из множества всех формул, истинных в этой интерпретации
(её элементарную теорию).
Несложно понять, что эта теория экзистенциально полна. Действительно, по определению нашей теории имеем:
\equ{\Th(\N_1)\vdash\exis x\ph(x)\Lra \N_1\vDash\exis x\ph(x),}
а это означает, опять же, по определению, что найдётся натуральное число $n$, для которого
$N_1\vDash\ph(n)$.
\end{ex}
\begin{ex}
А вот обратный пример. Рассмотрим сигнатуру $\Om_1=(\emptyset,\emptyset, \{<\},\ga_1)$, интерпретируемую как натуральные числа
со стандартным упорядочением ($\N_2$). В качестве теории вновь возьмём элементарную теорию данной интерпретации.
Ясно, однако, что никакой экзистенциальной полноты здесь быть не может: так как множества констант и функциональных символов пусты,
замкнутых термов в данной сигнатуре просто нет, и подставлять в формулу будет нечего.
\end{ex}
\subsubsection{Свойство Хенкина}
\begin{df}
Будем говорить, что формула $\ph(x)$ обладает свойством Хенкина относительно теории $T$, если существует
такая константа данной сигнатуры $c\in\Cnst$, что
\equ{T\vdash\exis x\ph(x)\ra\ph(c).}
\end{df}
\begin{df}
Теория $T$ является теорией Хенкина, если любая формула обладает одноимённым свойством относительно этой теории.
\end{df}
\begin{lemma}
Любая теория Хенкина экзистенциально полна.
\end{lemma}
\begin{proof}
Очевидно.
\end{proof}
\subsubsection{Вложение непротиворечивых теорий в полные теории Хенкина}
\begin{lemma}[о свежих константах]
Пусть дана формула $\ph(x)\in\Fm_{\Om}$  и некоторая константа $c\in\Cnst$,
не входящая в эту формулу, причём $\vdash_{\PC_{\Om}^{(=)}}\ph(c)$. Тогда $\vdash_{\PC_{\Om}^{(=)}}\ph(x)$.
\end{lemma}
\begin{proof}
Пусть $\vdash\ph(c)$, докажем, что $\vdash\ph(z)$, где $z$\т некоторая переменная, не встречающаяся в выводе $\ph(c)$.
Доказательство будем проводить по индукции по длине вывода $\ph(c)$.
\begin{enumerate}
  \item $\ph(c)$\т аксиома. В таком случае $\ph(z)$\т также аксиома.
  \item $\ph(c)$ получается по правилу МР:
  \equ{\frac{\psi(c),\psi(c)\ra\ph(c)}{\ph(c)}}
  и вывод формул $\psi(c)$ и $\psi(c)\ra\ph(c)$ короче, чем вывод $\ph(c)$. Тогда по предположению индукции
  имеем $\vdash\psi(z)$ и $\vdash\psi(z)\ra\ph(z)$, откуда по МР получаем $\ph(z)$.
  \item $\ph(c)$ получается по правилу обобщения: рассуждаем аналогично предыдущему случаю.
\end{enumerate}
Итак, мы научились выводить $\ph(z)$, а значит, по правилу обощения, и $\vdash\forall z\ph(z)$.
По построению эта подстановка свободна, что даёт нам право воспользоваться 12й аксиомой:
\equ{\vdash\forall z\ph(z)\ra\ph(x),}
откуда по МР получаем требуемое.
\end{proof}
\begin{lemma}
Пусть $T$\т непротиворечивая теория в <<счётной>> (то есть не более чем счётной) сигнатуре $\Om$.
Тогда существует такая сигнатура
\equ{\Om'=\Om\cup\{c_n|n\in\N\},}
и непротиворечивая теория Хенкина $T'$ в ней, что $T\subseteq T'.$
\end{lemma}
\begin{proof}
Пронумеруем все замкнутые формулы сигнатуры $\Om'$ вида $\exis{x_n}\ph_n(x_n)$.
Построим индуктивно последовательность теорий $T_n$. Положим $T_0=T,\,\Om_0=\Om$ и
\equ{T_{n+1}=T_n\cup\{\exis x_n\ph_n(x_n)\ra\ph_n(d_n)\},}
где $d_n$\т первая константа, не попавшая в $\Om_n$.
\begin{nbb}
Поясню идею этого построения (как я её понимаю). У нас есть теория $T$. Мы для каждой формулы
вида $\exis x\ph(x)\ra\ph(c)$ проверяем, выводима ли она из нашей теории хоть для какой-нибудь константы $c$.
Если такой константы не нашлось, мы добавляем в сигнатуру новую константу ($d_n$), а к теории\т
новую формулу ($\exis x_n\ph_n(x_n)\ra\ph_n(d_n)$).
\end{nbb}
Убедимся (опять таки индуктивно), что построенные таким образом теории будут непротиворечивы.
База у нас есть (исходная теория была непротиворечива по условию), будем доказывать шаг.
Итак, считаем, что про теорию $T_n$ известно, что она непротиворечива. Следует убедиться в непротеворечивости
теории $T_{n+1}$. Предположим обратное (то есть противоречивость $T_{n+1}$).
Мы знаем, что эта теория имеет вид $T_{n+1}=T_n,\al$, и её противоречивость означает, что
\equ{T_n,\al\vdash\psi,\quad T_n,\al\vdash\neg\psi.}
По теореме дедукции получаем
\equ{T_n\vdash\al\ra\psi,\quad T_n\vdash\al\ra\neg\psi.}
Теперь воспользуемся 10й аксиомой и получим $T_n\vdash\neg\al.$ Это означает, что в теории $T_n$
найдутся формулы $r_1\sco r_k$ такие, что $r_1\&\ldots\&r_k\vdash\neg\al$. Вновь применим теорему дедукции:
\equ{\vdash r_1\&\ldots\&r_k\ra\neg\al.}
Вспомним, что $\al=\exis x_n\ph_n(x_n)\ra\ph_n(d_n)$ и применим предыдущую лемму:
\equ{\vdash r_1\&\ldots\&r_k\ra\neg(\exis x_n\ph_n(x_n)\ra\ph_n(d_n))\Ra\vdash r_1\&\ldots\&r_k\ra\neg(\exis x_n\ph_n(x_n)\ra\ph_n(x)),}
то есть
\equ{T_n\vdash\neg(\exis x_n\ph_n(x_n)\ra\ph_n(x)).}
Осталось понять, почему это невозможно. Нам известно, что
\equ{\neg(\al\ra\be)\ra\al\&\neg\be.}
В нашем случае это означает следующее:
\equ{T_n\vdash\exis x\ph(x)\& \neg\ph(x).}
Воспользуемся правилом обобщения:
\equ{T_n\vdash\fora x(\exis x\ph(x)\& \neg\ph(x)).}
Теперь остаётся <<раскрыть скобки>>. С одной стороны, получим
\equ{T_n\vdash\exis x\ph(x),}
так как
\equ{\fora x(\exis x\ph(x)\& \neg\ph(x))\ra\fora x \exis x \ph(x),\quad \fora x \exis x \ph(x)\ra\exis x\ph(x),}
а с другой стороны, пользуясь тем, что $\fora x\neg\ph(x)\ra\neg\exis x\ph(x)$, имеем
\equ{T_n\vdash\neg\exis x\ph(x).}
Это не согласуется с непротиворечивостью теории $T_n$, а значит, наше предположении о противоречивости $T_{n+1}$ было ошибочным.
Таким образом, все теории $T_n$ будут непротиворечивы, а значит, непротиворечивой теорией будет и их объединение:
\equ{T':=\bigcup_n T_n.}  По построению, эта теория будет содержать исходную и являться теорией Хенкина, что и требовалось.
\end{proof}
\begin{lemma}
Пусть $T$\т непротиворечивая теория в <<счётной>> (то есть не более чем счётной) сигнатуре $\Om$.
Тогда существует такая сигнатура
\equ{\Om'=\Om\cup\{c_n|n\in\N\},}
и полная непротиворечивая теория Хенкина $S$ в ней, что $S\subseteq T'.$
\end{lemma}
\begin{proof}
Достаточно применить предыдущую лемму и лемму Линденбаума.
\end{proof}
\subsection{Существование модели}
\subsubsection{Случай теории без равенства}
\begin{lemma}
Пусть $T$\т непротиворечивая, полная, экзистенциально полная теория без равенства в не более чем счётной
сигнатуре $\Om$. Тогда теория $T$ имеет счётную модель.
\end{lemma}
\begin{proof}
Рассмотрим множество $D$ всех замкнутых термов сигнатуры $\Om$ (ясно, что оно не пусто, раз уж
у нас нашлась экзистенциально полная теория, и не более чем счётно).
Определим на это множестве модель: \equ{M=(D,I).}
Константы и функциональные символы $I$ будет отображать в себя,
а предикатные символы интерпретировать так:
\equ{
P^M(t_1\sco t_n):=\begin{cases}
1,\quad T\vdash P(t_1\sco t_n)\\
0,\quad \text{иначе.}
\end{cases}
}

Покажем, что в такой интерпретации для любого терма имеем $t^M=t$.
Проведём индукцию по числу функциональных символов, входящих в терм.
Если их нет (база индукции), требование, очевидно, выполнено.
Пусть теперь $t=f(t_1\sco t_k),$ тогда по предположению индукции
\equ{t^M=f^M(t_1^M\sco t_k^M)=f(t_1\sco t_k)=t,}
что и требовалось.

Теперь осталось убедиться, что для любой замкнутой формулы $\ph$
\equ{M\vDash\ph\Lra T\vdash\ph.}
Как обычно, используем индукцию, на этот раз\т по числу логических связок, входящих в $\ph$.
Если их нет (атомарная формула), утверждение следует из определения оценки для предикатных символов.
Для формул вида $\ph\&\psi,\,\ph\vee\psi$ и т. п. проверка тривиальна. Рассмотрим несколько более сложный
случай формулы $\ph=\exis x\psi(x).$ В силу экзистенциальной полноты $M\vDash\exis x\psi(x)$ тогда и только тогда,
когда существует замкнутый терм $t$, такой что $M\vDash\psi(t),$ а по предположению индукции это возможно лишь
в том случае, если $T\vdash\psi(t).$ Это доказывает шаг индукции, а вместе с ним и всю лемму, так как теперь
уже ясно, что построенная модель является требуемой.
\end{proof}
\begin{theorem}[о существовании модели]
Пусть $T$\т непротиворечивая теория без равенства в не более чем счётной
сигнатуре $\Om$. Тогда теория $T$ имеет счётную модель.
\end{theorem}
\begin{proof}
Непротиворечивые теории мы умеем вкладывать в полные теории Хенкина, для которых можно применить только что доказанную лемму.
\end{proof}
\begin{theorem}[Гёделя о полноте]
\equ{\vDash\ph\Ra\vdash_{\PC_{\Om}}\ph.}
\end{theorem}
\begin{proof}
Ясно, что формулу $\ph$ можно считать замкнутой. Пусть $\not\vdash\ph$. Тогда теория
$\{\neg\ph\}$ непротиворечива, а значит, у неё существует счётная модель: $M\vDash\neg\ph$.
Следовательно, $\not\vDash\ph$, что и требовалось доказать.
\end{proof}
\begin{imp}[теорема Лёвенгейма\ч Сколема]
Если теория 1го порядка без равенства имеет модель, то она имеет счётную модель.
\end{imp}
\subsubsection{Случай теории с равенством}
\begin{ex}
Рассмотрим теорию с равенством из одной формулы:
\equ{\fora x\fora y\, x=y.}
Ясно, что модель этой теории не может состоять из более чем одного элемента. Этот пример показывает,
что для теорий с равенством существование (нормальной) счётной модели не является обязательным.
\end{ex}
\begin{theorem}
Пусть $T$\т непротиворечивая теория с равенством в не более чем счётной
сигнатуре $\Om$. Тогда теория $T$ имеет не более чем счётную модель.
\end{theorem}
\begin{proof}
Положим $T^==T\cup\{\text{аксиомы равенства 16\ч20}\}$. У этой теории существует счётная модель $M=(M,I)$,
однако она не обязательно нормальна. Введём на этой модели отношение эквивалентности:
\equ{a\sim b:=M\vDash a=b.}
\begin{stm}
Такое определение отношения эквивалентности является корректным.
\end{stm}
\begin{proof}
Все необходимые свойства следуют из аксиом равенства 16\ч 18.
\end{proof}
\begin{stm}
Пусть
\equ{a_i\sim b_i,\quad i=1\sco n.}
Тогда
\equ{f^M(a_1\sco a_n)=f^M(b_1\sco b_n).}
\end{stm}
\begin{proof}
Достаточно воспользоваться аксиомой 19.
\end{proof}
\begin{stm}
Пусть
\equ{a_i\sim b_i,\quad i=1\sco n.}
Тогда
\equ{P^M(a_1\sco a_n)=P^M(b_1\sco b_n).}
\end{stm}
\begin{proof}
Достаточно воспользоваться аксиомой 20.
\end{proof}
Итак, в качестве предметной области новой модели $\wt M$ возьмём фактор прежнего носителя
по построенному выше отношению эквивалентности: $\wt M:=M/\sim$. Элементами этого носителя
являются классы эквивалентности $\wt a$ элементов из $M$.
Теперь определим новую интерпретирующую функцию $\wt I$. А именно, положим
\equ{
\begin{cases}
c^{\wt M}:=\wt{c^M}\\
f^{\wt M}(\wt a_1\sco\wt a_n):=\wt{f^M}(a_1\sco a_n)\\
P^{\wt M}(\wt a_1\sco\wt a_n):=P^M(a_1\sco a_n).
\end{cases}
}
Такая модель будет нормальна по построению. Нужно, однако, ещё доказать,
что это действительно модель теории $T$.
\begin{nbb}
В дальнейшем для класса эквивалентности будет также использоваться обозначение $\sim[\cdot]$.
\end{nbb}
\begin{stm}
\label{stm::hom}
Пусть $t\in\Tm_{\Om}$ и $\FV(t)\subseteq\{x_1\sco x_n\}.$
Тогда $\sim[|t(a_1\sco a_n)|_M]=|t(\wt a_1\sco \wt a_n)|_{\wt M}.$
\end{stm}
\begin{proof}
Доказываем индукцией по числу функциональных символов в терме $t$.
База (когда их нет)\т очевидна (в этом случае терм\т это переменная либо константа).
Докажем шаг:
\ml{\sim[|t(a_1\sco a_n)|_M]=\sim[|f(r_1(a_1\sco a_n)\sco r_m(a_1\sco a_m))|_M]=|f(r_1(\wt a_1\sco \wt a_n)\sco r_n(\wt a_1\sco \wt a_n))|_{\wt M}=\\
=f^{\wt M}(|r_1(\wt a_1\sco \wt a_n)|_{\wt M}\sco |r_n(\wt a_1\sco \wt a_n)|_{\wt M})=f^{\wt M}(\sim[|r_1(a_1\sco a_n)|_M]\sco \sim[|r_n(a_1\sco a_n)|_M])=\\
=\sim[f^M(|r_1(a_1\sco a_n)|_M\sco |r_n(a_1\sco a_n)|_M)].}
\end{proof}
\begin{lemma}
\label{lem::hom}
Пусть $\ph\in \Fm_{\Om}$ и $\FV(\ph)\subseteq\{x_1\sco x_n\}.$ Тогда
\equ{M\vDash\ph(a_1\sco a_n)\Lra \wt M\vDash\ph(\wt a_1\sco \wt a_n).}
\end{lemma}
\begin{proof}
В который раз\т индукция по длине формулы. База\т предикатный символ, он же атомарная формула, выполняется по определению.
Проверим шаг. Пусть, к примеру, $\ph=\ph_1\&\ph_2.$ Тогда
\equ{M\vDash\ph\Lra M\vDash\ph_1\text{ и }M\vDash\ph_2,}
а для каждой из них выполнено предположение индукции. Случаи
дизъюнкции, импликации и отрицания проверяются аналогично. Остановимся отдельно на случае с квантором.
Пусть $\ph(a_1\sco a_n)=\exis y \psi(y,a_1\sco a_n).$ Истинность этой формулы в модели $M$ означает, что
в этой модели найдётся элемент носителя $b$, такой что $M\vDash\psi(b,a_1\sco a_n).$ Применяя предположение индукции,
получим $\wt M\vDash\psi(\wt b,\wt a_1\sco\wt a_n),$ откуда следует, что $\wt M\vDash\ph(\wt a_1\sco\wt a_n).$ Тем самым лемма доказана.
\end{proof}
Таким образом, мы показали, что $M\vDash T^=\Ra\wt M\vDash T$. Это завершает доказательство теоремы.
\end{proof}
Теперь точно так же, как в случае теорий без равенства, можно доказать следующую теорему.
\begin{theorem}[Гёделя о полноте для исчисления предикатов с равенством]
\equ{\vDash\ph\Ra\vdash_{\PC_{\Om}^=}\ph.}
\end{theorem}
\begin{imp}[теорема Лёвенгейма\ч Сколема]
Если теория 1го порядка с равенством выполнима, то она имеет не более чем счётную нормальную модель.
\end{imp}
\begin{theorem}[компактности Гёделя\ч Мальцева]
Если всякое конечное подмножество теории $T$ выполнимо, то теория $T$ имеет модель.
\end{theorem}
\begin{proof}
Предположим обратное. Это означает, что теория $T$ противоречива.
Однако, в доказательстве её противоречивости будет присутствовать лишь конечное число
формул, то есть в ней найдётся конечное подмножество, не имеющее модели. Получили противеоречие,
которое и доказывает теорему.
\end{proof}
\begin{imp}
Если теория имеет модели сколь угодно большой конечной мощности,
то она имеет и бесконечную модель.
\end{imp}
\begin{proof}
Итак, пусть теория $T$ в сигнатуре $\Om$ имеет модели сколь угодно большой конечной мощности.
Построим сигнатуру $\Om':=\Om\cup\{c_n|n\ge1\}$, то есть просто добавим к сигнатуре $\Om$
счётное множество констант. В ней возьмём теорию $T':=T\cup\{c_i\neq c_j|i<j\}.$ Покажем, что каждое
конечное подмножество $T''\subset T'$ этой теории выполнимо. Для любого конечного подмножества имеем
$T''\subseteq T_n:=T\cup\{c_i\neq c_j|1\le i<j\le n\}.$
По условию теоремы, существует модель $M\vDash T,\,|M|=n.$ Это означает,
что из неё можно сделать модель теории $T_n$, сопоставив новым константам попарно различные элементы из $M$.
Таким образом, в силу теоремы компактности, теория $T'$ имеет модель, и эта модель бесконечна, так
как сама теория требует наличия в ней счётного множества попарно различных элементов.
Однако, эта же модель будет моделью исходной теории $T$, что и доказывает теорему.
\end{proof}
\begin{ex}
Не существует теории первого порядка в сигнатуре групп, такой что
$M\vDash T$ тогда и только тогда, когда $M$\т конечная группа.
\end{ex}
\subsection{Изоморфизм и элементарная эквивалентность интерпретаций}
\subsubsection{Определения и основные свойства}
\begin{df}
Пусть $M$ и $M'$\т две интерпретации сигнатуры $\Om$.
Будем говорить, что $\pi:M\cong M'$\т изоморфизм этих интерпретаций,
если $\pi$\т биекция, сохраняющая все операции и предикаты.
\end{df}
\begin{lemma}
Значения термов сохраняются при изоморфизме:
\equ{\pi(|t(a_1\sco a_n)|_M)=|t(\pi a_1\sco\pi a_n)|_{M'}.}
\end{lemma}
\begin{proof}
Доказательство проводится по индукции и полностью аналогично доказательству утверждения \ref{stm::hom}.
\end{proof}
\begin{lemma}
\label{lem::isom}
Выводимость формул сохраняется при изоморфизме:
\equ{M\vDash\ph(a_1\sco a_n)\Lra M'\vDash\ph(\pi a_1\sco \pi a_n).}
\end{lemma}
\begin{proof}
Доказательство полностью аналогично доказательству леммы \ref{lem::hom}.
\end{proof}
\begin{nbb}
Такое совпадение доказательств не случайно. Когда мы брали фактор по отношению эквивалентности, мы имели
дело с <<гомоморфизмом>> интерпретаций.
\end{nbb}
\begin{df}
Интерпретации изоморфны, если между ними существует изоморфизм.
\end{df}
\begin{stm}
Изоморфизм интерпретаций является отношением эквивалентности.
\end{stm}
\begin{proof}
Очевидно.
\end{proof}
\begin{df}
Модели называют элементарно эквивалентными, если их элементарные теории совпадают.
\end{df}
\begin{theorem}
Изоморфные теории элементарно эквивалентны.
\end{theorem}
\begin{proof}
Следует из леммы \ref{lem::isom}.
\end{proof}
Построим пример элементарно эквивалентных неизоморфных теорий.
\begin{ex}
Рассмотрим стандартную сигнатуру арифметики $\Om_0$: константы $0$ и $1$, предикатный символ равенства,
функциональные символы сложения и умножения. Пусть $\N_0=(\N,I)$\т её стандартная интерпретация.
Элементарная теория этой модели $\Th(\N_0)$ носит название полной арифметики.

Также рассмотрим сигнатуру $\Om_1:=\Om\cup\{\infty\}$ и в ней теорию $T:\Th(\N_0)\cup\{\infty\neq0,\infty\neq1,\ldots\}.$
Всякое конечное подмножество этой теории выполнимо, следовательно, в силу теоремы компактности Гёделя\ч Мальцева,
у этой теории существует некоторая модель $\N_1\vDash T$. При этом, очевидно, $\N_1\vDash \Th(\N_0).$
Однако, эти модели неизоморфны: элементу $\infty\in\N_1$ в $\Th(\N_0)$ не найдётся соответствия.
\end{ex}
\begin{nbb}
А почему, собственно, они будут элементарно эквивалентны?
\end{nbb}
\begin{lemma}[о полноте]
Теория полна тогда и только тогда, когда все её модели элементарно эквивалентны.
\end{lemma}
\begin{proof}
Пусть теория полна и $M$ и $M'$\т её модели. Для любой формулы $\ph$ имеем: либо $T\vDash \ph$, откуда
$M\vDash\ph$ и $M'\vDash\ph$, либо то же самое выполнено относительно $\neg\ph$. Значит, все истинные формулы у этих моделей
одни и те же, что и требовалось. Теперь докажем в обратную сторону. Пусть все модели теории $T$ элементарно эквивалентны.
Тогда если $T\not\vdash\ph$, то для некоторой модели (а значит и для всех) $M\not\vDash\ph$, откуда $T\vDash\neg\ph$.
\end{proof}
\subsubsection{Сильная категоричность и счётная категоричность}
\begin{df}
Теория первого порядка называется сильно категоричной, если все её модели изоморфны.
\end{df}
\begin{df}
Теория первого порядка называется счётно\ч категоричной, если все её счётные модели изоморфны.
\end{df}
\begin{stm}
Любая сильно категоричная теория полна.
\end{stm}
\begin{proof}
Следует из леммы о полноте.
\end{proof}
\begin{stm}[признак Вота]
Любая счётно\ч категоричная теория, не имеющая конечных моделей, полна.
\end{stm}
\begin{proof}
Пусть теория $T$ непротиворечива (иначе, она, конечно, полна). Тогда у неё есть модель $M\vDash T,$ и эта модель счётна (по условию).
\begin{stm}
\equ{T\vDash\ph\Lra M\vDash\ph.}
\end{stm}
\begin{proof}
В одну сторону это очевидно, ведь $M$\т это модель $T$.
Докажем, что $T\not\vDash\ph\Ra M\not\vDash\ph$.
Действительно, если $T\not\vDash\ph$, то теория $T\cup\{\neg\ph\}$ выполнима,
а значит, по теореме Лёвенгейма\ч Сколема, она имеет счётную модель. Однако, по условию,
она будет изоморфна исходной, откуда $M\vDash\neg\ph$.
\end{proof}
Это утверждение завершает доказательство признака Вота.
\end{proof}
\begin{ex}
Построим теорию плотного линейного порядка без наименьшего и наибольшего элементов ($DLO_{\lra}$\т dense linear order).
Сигнатура будет состоять из двух предикатных символов: $\{<,=\}.$ А в теорию войдут следующие аксиомы:
\begin{enumerate}
  \item $\fora x\,\neg x<x$;
  \item $\fora x\fora y\fora z\, x<y\&y<z\ra x<z$;
  \item $\fora x\fora y x<y\&y<x\ra x=y$;
  \item $\fora x\fora y x<y\ra \exis z\,(x<z\&z<y)$\т это и есть плотность;
  \item $\fora x\exis y\, x<y$;
  \item $\fora x\exis y\, y<x$.
\end{enumerate}
Согласно теореме Кантора, эта теория счётно\ч категорична.
\end{ex}
\begin{ex}
Рассмотрим самую простую сигнатуру с равенством: $\{=\}$.
Теория будет состоять из следующих формул:
\equ{T=\{\be_n|n\ge1\}\quad \be_n=\exis x_1\ldots \exis x_n \hr{\bigwedge\limits_{1\le i<j\le n}x_i\neq x_j}.}
Она счётно\ч категорична (очевидно).
\end{ex}
\begin{theorem}
Элементарная теория конечной интерпретации сильно категорична.
\end{theorem}
\begin{proof}
Мы докажем эту теорему лишь для случая конечной сигнатуры.

Итак, пусть $M=\{a_1\sco a_n\}.$ Рассмотрим следующую формулу:
\ml{\ph_M:=\exis x_1\ldots\exis x_n\left[\bigwedge\limits_{i<j}x_i\neq x_j\&\fora y\hr{\bigvee\limits_{i=1}^ny=x_i}\&
\bigwedge\limits_{i=1}^n\hc{c=x_i|c\in\Cnst,M\vDash c=a_i}\&\right. \\
\& \bigwedge\limits_{1\le i_1<\ldots<i_k\le n} \hc{P(x_{i_1}\sco x_{i_k})|P^k\in\Pr,M\vDash P(a_{i_1}\sco a_{i_k})}\&\\
\& \bigwedge\limits_{1\le i_1<\ldots<i_k\le n} \hc{\neg P(x_{i_1}\sco x_{i_k})|P^k\in\Pr,M\vDash \neg P(a_{i_1}\sco a_{i_k})}\&\\
\&\left. \bigwedge\limits_{1\le i_1<\ldots<i_k\le n} \hc{f(x_{i_1}\sco x_{i_k})=x_j|f^k\in\Fm,M\vDash f(a_{i_1}\sco a_{i_k})=a_j}\right].}
\begin{stm}
\equ{N\vDash\ph_M\Lra N\cong M.}
\end{stm}
\begin{proof}
Ясно, что в доказательстве нуждается лишь прямое ($\Ra$) утверждение. Итак, пусть
\equ{N\vDash\ph_M=\exis x_1\ldots\exis x_n\psi(x_1\sco x_n).}
Это означает, что $N\vDash\psi(b_1\sco b_n)$ для некоторого набора элементов $b_i$. Нам также известно,
что есть набор $a_i$, для которого $M\vDash\psi(a_1\sco a_n)$. Покажем, что отображение
\equ{\pi\cln a_i\mapsto b_i} является изоморфизмом интерпретаций.
Необходимо проверить, что
\equ{\pi(f(a_{i_1}\sco a_{i_k})=f(\pi a_{i_1}\sco\pi a_{i_k})\text{ и }P(a_{i_1}\sco a_{i_k})=P(\pi a_{i_1}\sco\pi a_{i_k}).}
Пусть $f(b_{i_1}\sco b_{i_k})=b_j$. Это означает, что в формуле $\ph_M$ содержится <<множитель>> вида
$f(x_{i_1}\sco x_{i_k})=x_j$, а значит, в модели $M$ будет иметь место равенство $f(a_{i_1}\sco a_{i_k})=a_j$.
Аналогичное рассуждение позволяет убедиться, что значения предикатов также сохраняются.
\end{proof}
Непосредственно из доказанного утверждения следует сильная категоричность.
\end{proof}
\begin{imp}
Для конечных теорий изоморфизм равносилен элементарной эквивалентности.
\end{imp}

\section{Теория алгоритмов}

\subsection{Введение в системы Поста}

\subsubsection{Построение и примеры систем Поста}

\begin{df}
Система Поста (над алфавитом $\As$) есть четвёрка конечных множеств $E=(\As,\Bs,\Vs,\Ss)$,
первые три из которых попарно не пересекаются. Их называют, соответственно,
основной алфавит, вспомогательный алфавит, множество переменных и множество схем.
Множество схем состоит из кортежей вида $(t_1\sco t_n,t)$, где $n\ge0$, а
элементы $t_i$ и $t$ суть слова над алфавитами $\As,\Bs,\Vs$ (их называют термами).
\end{df}
В дальнейшем для обозначения множества всех слов над некоторым алфавитом, скажем, $\As$,
будет использоваться запись $\As^*$. Таким образом, термы являются элементами множества $(\As\cup\Bs\cup\Vs)^*.$
Схемы будут записывать так:
\equ{\frac{t_1\sco t_n}t.}
В случае, когда $n=0$, будем говорить, что $t$\т схема аксиом.
Если в схему вместо всех входящих в неё переменных подставить некоторые замкнутые термы, получим правило вывода (либо аксиому).
Понятия <<вывода>> и <<вывода из посылок>>  определяются аналогично тому, как это делалось в обычной логике высказываний.
\begin{df}
Язык, порождаемый системой Поста $E$\т это множество всех слов, выводимых в этой системе Поста:
\equ{L(E):=\hc{\al\in\As^*|\vdash_E\al}.}
\end{df}
\begin{df}
Множество слов над некоторым алфавитом называется (рекурсивно) перечислимым, если оно
совпадает с языком, порождённым некоторой системой Поста над этим алфавитом.
\end{df}
\begin{ex}
Построим систему Поста, которая порождает множество всех пропозициональных формул.
\equ{\As=\hc{p,|,\&,\vee,\ra,\neg,(,)},}
\equ{\Bs=\hc{A,F},\quad \Vs=\hc{x,y},}
\equ{\Ss=\hc{Ap,\frac{Ax}{Ax|},\frac{Ax}{Fx},\frac{Fx}{F\neg x},\frac{Fx,Fy}{F(x\&y)},\frac{Fx,Fy}{F(x\vee y)},\frac{Fx,Fy}{F(x\ra y)},\frac{Fx}{x}}.}
\end{ex}
\begin{ex}
Построим систему Поста, которая порождает всё множество $\As^*$.
\equ{\As=\{a_1\sco a_n\},\quad \Ss=\hc{\La,\frac{x}{xa_1}\sco\frac{x}{xa_n}}.}
\end{ex}
Здесь и далее $\La$ обозначает пустое слово.
\begin{theorem}
Объединение и пересечение перечислимых множеств само перечислимо.
\end{theorem}
\begin{proof}
Итак, пусть $X,Y\subseteq\As^*$\т перечислимы, то есть $X=L(E)$ и $Y=L(F)$, где $E=(\As,\Bs_E,\Vs_E,\Ss_E)$ и $F=(\As,\Bs_F,\Vs_F,\Ss_F)$\т некоторые системы Поста.
Рассмотрим случай объединения. Будем строить систему Поста $G=(\As,\Bs,\Vs,\Ss)$, для которой $X\cup Y=L(G)$.
Ввдеём новые символы $A,\ep,\ph,x$ и положим
\equ{\Bs=\Bs_E\cup\Bs_F\cup\hc{A,\ep,\ph},\quad \Vs=\Vs_E\cup\Vs_F\cup\hc x.}
Теперь заполним множество схем $\Ss$. Пусть в $\Ss_E$ содержится схема вида
\equ{\frac{t_1\sco t_n}{t},}
тогда в $\Ss$ включим схему
\equ{\frac{\ep t_1\sco \ep t_n}{\ep t}.}
В случае, если такая схема есть в $\Ss_F$, добавляем в $\Ss$ схему
\equ{\frac{\ph t_1\sco \ph t_n}{\ep t}.}
Кроме схем, получаемых таким образом, добавим ещё схемы
\equ{A,\frac{Ax}{Axa_1}\sco \frac{Ax}{Axa_n},\frac{Ax,\ep x}{x},\frac{Ax,\ph x}{x}.}
Теперь уже несложно убедиться, что для такой системы $G$ будет выполнена следующая лемма.
\begin{lemma}
\begin{enumerate}
  \item $\vdash_GAt\Lra t\in\As^*$
  \item $\vdash_G \ep t\Lra\vdash_E t$
  \item $\vdash_G \ph t\Lra\vdash_F t$
  \item $\vdash_G \al\in\As^*\Lra\al\in X\cup Y$
\end{enumerate}
\end{lemma}
Что же касается доказательства для случая пересечения, его единственным отличием будет то,
что вместо схем
\equ{\frac{Ax,\ep x}{x},\frac{Ax,\ph x}{x}}
следует добавлять схему
\equ{\frac{Ax,\ep x,\ph x}{x}.}
\end{proof}

\subsubsection{Подстановки и правила}
\begin{lemma}
Пусть даны термы $r_k\sco r_k,t,s$ и переменные $x_1\sco x_k,y$, причём все они все попарно различны. Тогда
\equ{
\hs{s/y}\hs{\ol r/\ol x}t=
\begin{cases}
\hs{r_1'\sco r_k',s/x_1\sco x_k,y}t,\quad y\not\in\ol x\\
\hs{r_1'\sco r_k'/x_1\sco x_k}t,\quad y\in\ol x,
\end{cases}
}
где $r_i':=\hs{s/y}r_i$.
\end{lemma}

\end{document}
